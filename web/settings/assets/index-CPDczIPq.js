const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Status-RLXlbY4S.js","assets/vendor-fortawesome-2rHPxBiM.js","assets/vendor-BuEZ7_tV.js","assets/vendor-sortablejs-DntTU6yg.js","assets/vendor-D1GV4U4l.css","assets/vendor-chartjs-ToPnxDR_.js","assets/vendor-luxon-BDx6lZXm.js","assets/vendor-bootstrap-Bp8-4ina.js","assets/vendor-jquery-CEMonh9Y.js","assets/vendor-bootstrap-Ct-dCSDz.css","assets/vendor-axios-t3FRgHRH.js","assets/Status-C2EBkHqs.css","assets/ChargeLog-DZTiEjxd.js","assets/ChargeLog-D2ZLixbI.css","assets/Chart-Cor0COEL.js","assets/Chart-BggLkBbQ.css","assets/GeneralConfig-C_uZYo9m.js","assets/dynamic-import-helper-BheWnx7M.js","assets/IdentificationConfig-CRY-eecE.js","assets/OptionalComponents-Comn3EMe.js","assets/GeneralChargeConfig-DmQ4Q1Px.js","assets/SurplusChargeConfig-D4EHzeXB.js","assets/ActiveBatControl-yhYfcBe5.js","assets/HardwareInstallation-DGLetmVy.js","assets/LoadManagementConfig-DEDVWf4c.js","assets/OpenwbSortableList-qm2vt1C1.js","assets/OpenwbSortableList-C11EhIQj.css","assets/ChargePointInstallation-CDVi8d9y.js","assets/ChargePointInstallation-37TSBtDo.css","assets/VehicleConfig-BwxIP6PO.js","assets/IoConfig-DDb8esn8.js","assets/CloudConfig-aBRgK24K.js","assets/MqttBridgeConfig-DtFIgefu.js","assets/DebugConfig-D9EzpEC6.js","assets/DebugConfig-CN753w98.css","assets/Support-B8LhoRnz.js","assets/LegalSettings-eZ18R0ET.js","assets/System-BGGybnlW.js","assets/System-mIkhU2_b.css","assets/Security-Cw6LJ0x9.js","assets/DataManagement-C2ar1dpw.js","assets/InstallAssistant-nDgvRIWP.js","assets/Error-D0Qw_Svu.js","assets/TestingStore-DaVoKHng.js"])))=>i.map(i=>d[i]);
import{_ as k,f as u,j as h,k as B,l as i,m as b,q as p,u as l,x as _,y as W,z as g,A as P,D as m,E as C,F as f,G as $,I as H,J as M,K as v,L as q,M as V,N as Z,O as re,P as de,Q as ue,R as ce,T as R,S as G,n as pe,U as me,V as fe,W as ge,X as be,Y as he,Z as _e,$ as ye,a0 as ve}from"./vendor-BuEZ7_tV.js";import{l as O,f as Q,a as Y,F as I,b as we,c as ke,d as N,e as Se,g as z,h as Be,i as $e,j as Ce,k as Ae,m as Oe,n as Ie,o as qe,p as Te,q as Me,r as Ve,s as Pe,t as Le,u as De,v as We,w as X,x as Ee,y as xe,z as je,A as Re,B as Ne,C as ee,D as ze,E as Ue,G as Fe,H as He,I as Ge,J as Ke,K as Je,L as Ze,M as Qe,N as Ye,O as Xe,P as te,Q as et,R as tt,S as st}from"./vendor-fortawesome-2rHPxBiM.js";import"./vendor-bootstrap-Bp8-4ina.js";import{p as nt,a as ot}from"./vendor-axios-t3FRgHRH.js";import"./vendor-sortablejs-DntTU6yg.js";import"./vendor-jquery-CEMonh9Y.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();const it={name:"OpenwbAlert",props:{subtype:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"}}};function at(e,t,s,r,a,n){return i(),u("div",{class:B(["card-text alert","alert-"+s.subtype])},[h(e.$slots,"default",{},void 0,!0)],2)}const lt=k(it,[["render",at],["__scopeId","data-v-055c15aa"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseAlert.vue"]]),rt=Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"}));O.add(Q,Y);const dt={name:"OpenwbBaseSettingElement",components:{FontAwesomeIcon:I},data(){return{showHelp:!1}},methods:{toggleHelp(){this.showHelp=!this.showHelp&&this.$slots.help!==void 0}}},ut={key:0,class:"col-md-4 col-form-label"},ct={class:"form-row"},pt={key:0,class:"form-text alert alert-info my-1 small flex-fill"};function mt(e,t,s,r,a,n){const o=b("font-awesome-icon");return i(),u("div",{class:B(["form-row",e.$slots.title?"mb-1":"mx-0"])},[e.$slots.title?(i(),u("div",ut,[h(e.$slots,"title",{},void 0,!0),e.$slots.help?(i(),_(o,{key:0,icon:a.showHelp?["fas","question-circle"]:["far","question-circle"],class:B(["clickable ml-1",a.showHelp?"text-info":""]),onClick:W(n.toggleHelp,["stop"])},null,8,["icon","class","onClick"])):p("",!0)])):p("",!0),l("div",{class:B(e.$slots.title?"col-md-8":"col px-0")},[l("div",{class:B({"form-row":e.$slots.title})},[h(e.$slots,"default",{},()=>[t[0]||(t[0]=g("*ELEMENT MISSING*",-1))],!0)],2),l("div",ct,[a.showHelp?(i(),u("span",pt,[h(e.$slots,"help",{},void 0,!0)])):p("",!0)])],2)],2)}const L=k(dt,[["render",mt],["__scopeId","data-v-33864f66"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseSettingElement.vue"]]),ft=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),gt={name:"BaseSettingComponents",data(){return{uid:Math.random().toString(36).substring(2,15)}}},D=k(gt,[["__file","/opt/openWB-dev/openwb-ui-settings/src/components/mixins/BaseSettingComponents.vue"]]);O.add(we,ke,N,Se);const bt={name:"OpenwbArrayInput",components:{FontAwesomeIcon:I,OpenwbBaseSettingElement:L},mixins:[D],inheritAttrs:!1,props:{title:{type:String,required:!0},modelValue:{type:Array,default:()=>[]},validElements:{type:Array,default:()=>null},noElementsMessage:{type:String,default:()=>"Keine Elemente zugeordnet."},readonly:{type:Boolean,default:()=>!1}},emits:["update:modelValue"],data(){return{newTag:""}},computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},remainingElements(){return this.validElements===null?null:this.validElements.filter(e=>!this.value.includes(e))},newTagValid:{get(){return this.newTag.length>0&&!this.value.includes(this.newTag)&&(this.validElements===null||this.validElements.includes(this.newTag))&&this.$refs.tagInput?.checkValidity()}}},methods:{addTag(){if(this.newTagValid){const e=[...this.value,this.newTag].sort();this.value=e,this.newTag=""}this.$refs.tagInput.focus()},removeTag(e){let t=[...this.value];t.splice(e,1),this.value=t}}},ht={key:0,class:"w-100"},_t={class:"input-group"},yt={class:"input-group-prepend"},vt={class:"input-group-text"},wt=["id"],kt=["id"],St={value:"",disabled:""},Bt=["value"],$t={class:"input-group-append"},Ct={class:"tagList mt-1 w-100"},At={key:0,class:"noTag"};function Ot(e,t,s,r,a,n){const o=b("font-awesome-icon"),c=b("openwb-base-setting-element");return i(),_(c,null,P({title:m(()=>[h(e.$slots,"title",{},()=>[g(v(s.title),1)],!0)]),default:m(()=>[s.readonly?p("",!0):(i(),u("div",ht,[l("div",_t,[l("div",yt,[l("div",vt,[h(e.$slots,"input-prefix",{},()=>[f(o,{icon:["fas","tag"]})],!0)])]),s.validElements===null?C((i(),u("input",$({key:0,id:`${e.uid}-tag-input`,ref:"tagInput","onUpdate:modelValue":t[0]||(t[0]=d=>a.newTag=d),type:"text",class:"form-control"},e.$attrs,{onKeyup:t[1]||(t[1]=H((...d)=>n.addTag&&n.addTag(...d),["enter"]))}),null,16,wt)),[[M,a.newTag]]):C((i(),u("select",$({key:1,id:`${e.uid}-tag-input`,ref:"tagInput","onUpdate:modelValue":t[2]||(t[2]=d=>a.newTag=d),class:"form-control"},e.$attrs,{onKeyup:t[3]||(t[3]=H((...d)=>n.addTag&&n.addTag(...d),["enter"]))}),[l("option",St,v(n.remainingElements.length>0?"Bitte wählen...":"Keine weiteren Optionen verfügbar"),1),(i(!0),u(q,null,V(n.remainingElements,(d,y)=>(i(),u("option",{key:y,value:d},v(d),9,Bt))),128))],16,kt)),[[Z,a.newTag]]),l("div",$t,[l("div",{class:B(["input-group-text",n.newTagValid?"bg-success clickable":"not-clickable"]),onClick:t[4]||(t[4]=(...d)=>n.addTag&&n.addTag(...d))},[h(e.$slots,"input-add",{},()=>[f(o,{icon:["fas","plus"]})],!0)],2)])])])),l("div",Ct,[n.value.length==0?(i(),u("span",At,[f(o,{icon:["fas","info-circle"]}),g(" "+v(s.noElementsMessage),1)])):p("",!0),(i(!0),u(q,null,V(n.value,(d,y)=>(i(),u("span",{key:y,class:"tag"},[h(e.$slots,"element-prefix",{},()=>[f(o,{icon:["fas","tag"]})],!0),g(" "+v(d)+" ",1),s.readonly?p("",!0):(i(),_(o,{key:0,class:"clickable remove-element",icon:["fas","times-circle"],onClick:w=>n.removeTag(y)},null,8,["onClick"]))]))),128))])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const It=k(bt,[["render",Ot],["__scopeId","data-v-9de93d37"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseArrayInput.vue"]]),qt=Object.freeze(Object.defineProperty({__proto__:null,default:It},Symbol.toStringTag,{value:"Module"})),Tt={name:"OpenwbAvatar"},Mt={class:"avatar"};function Vt(e,t,s,r,a,n){return i(),u("div",Mt,[h(e.$slots,"default",{},()=>[t[0]||(t[0]=g("?",-1))],!0)])}const Pt=k(Tt,[["render",Vt],["__scopeId","data-v-06082a1a"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseAvatar.vue"]]),Lt=Object.freeze(Object.defineProperty({__proto__:null,default:Pt},Symbol.toStringTag,{value:"Module"}));O.add(z);const Dt={name:"OpenwbButtonRow",components:{FontAwesomeIcon:I},inheritAttrs:!1,props:{buttons:{type:Array,required:!0},modelValue:{type:[String,Number,Boolean],default:null},disabled:{type:Boolean,default:!1},uid:{type:String,required:!0}},emits:["update:modelValue","button-click"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},Wt={class:"btn-group btn-block btn-group-toggle"},Et=["for"],xt=["id","value","disabled","onClick"];function jt(e,t,s,r,a,n){const o=b("font-awesome-icon");return i(),u("div",Wt,[(i(!0),u(q,null,V(s.buttons,c=>(i(),u("label",{key:c.buttonValue,class:B(["btn btn-same-size btn-centered",[{active:s.modelValue===c.buttonValue},{disabled:s.disabled},c.class?c.class:"btn-outline-info"]]),for:`${s.uid}-${c.buttonValue}`},[l("span",null,[C(l("input",$({id:`${s.uid}-${c.buttonValue}`,"onUpdate:modelValue":t[0]||(t[0]=d=>n.value=d),type:"radio",value:c.buttonValue},{ref_for:!0},e.$attrs,{disabled:s.disabled,onClick:d=>e.$emit("button-click",c.buttonValue)}),null,16,xt),[[re,n.value]]),h(e.$slots,"label-"+c.buttonValue,{},()=>[g(v(c.text),1)],!0),t[1]||(t[1]=l("span",null," ",-1)),f(o,{icon:["fas","check"],style:de([n.value==c.buttonValue?"visibility: visible":"visibility: hidden"])},null,8,["style"])])],10,Et))),128))])}const se=k(Dt,[["render",jt],["__scopeId","data-v-4bd221b6"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseButtonRow.vue"]]),Rt=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"})),Nt={name:"OpenwbButtonGroupInput",components:{OpenwbBaseSettingElement:L,OpenwbBaseButtonRow:se},mixins:[D],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:[String,Number,Boolean],default:void 0},buttons:{type:Array,required:!0},disabled:{type:Boolean,required:!1,default:!1},maxButtonsPerRow:{type:Number,default:Number.POSITIVE_INFINITY}},emits:["update:modelValue","button-click"],data(){return{containerWidth:0}},computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},maxButtonsPerRowAuto(){return this.containerWidth<=200?1:this.containerWidth<=360?2:this.containerWidth<=550?3:1/0},buttonRows(){const e=[];for(let t=0;t<this.buttons.length;t+=this.maxButtonsPerRowAuto)e.push(this.buttons.slice(t,t+this.maxButtonsPerRowAuto));return e},screenSizeXs(){return this.containerWidth<=360},screenSizeSm(){return this.containerWidth<=550},screenSizeMd(){return this.containerWidth<=1024}},mounted(){this.updateContainerWidth(),window.addEventListener("resize",this.updateContainerWidth)},beforeUnmount(){window.removeEventListener("resize",this.updateContainerWidth)},methods:{updateContainerWidth(){const e=this.$refs.container;e&&(this.containerWidth=e.offsetWidth)}}},zt={ref:"container",class:"btn-group-multi"};function Ut(e,t,s,r,a,n){const o=b("openwb-base-button-row"),c=b("openwb-base-setting-element");return i(),_(c,null,P({title:m(()=>[h(e.$slots,"title",{},()=>[g(v(s.title),1)],!0)]),default:m(()=>[l("div",zt,[(i(!0),u(q,null,V(n.buttonRows,(d,y)=>(i(),_(o,$({key:y,buttons:d,uid:e.uid,"model-value":n.value,disabled:s.disabled},{ref_for:!0},e.$attrs,{"onUpdate:modelValue":t[0]||(t[0]=w=>n.value=w),onButtonClick:t[1]||(t[1]=w=>e.$emit("button-click",w))}),P({_:2},[V(d,w=>({name:`label-${w.buttonValue}`,fn:m(T=>[h(e.$slots,`label-${w.buttonValue}`,$({ref_for:!0},T),void 0,!0)])}))]),1040,["buttons","uid","model-value","disabled"]))),128))],512)]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const Ft=k(Nt,[["render",Ut],["__scopeId","data-v-31e583df"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseButtonGroupInput.vue"]]),Ht=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"})),Gt={name:"OpenwbClickButton",props:{title:{type:String,required:!1,default:""},tooltip:{type:String,required:!1,default:""}},emits:["buttonClicked"],methods:{click(e){this.$emit("buttonClicked",e)}}},Kt=["title"];function Jt(e,t,s,r,a,n){return i(),u("button",{type:"button",class:"btn btn-block",title:s.tooltip,onClick:t[0]||(t[0]=W((...o)=>n.click&&n.click(...o),["prevent"]))},[h(e.$slots,"default",{},()=>[g(v(s.title),1)],!0)],8,Kt)}const ne=k(Gt,[["render",Jt],["__scopeId","data-v-2e9c095b"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseClickButton.vue"]]),Zt=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),Qt={name:"OpenwbButtonInput",components:{OpenwbBaseSettingElement:L,OpenwbBaseClickButton:ne},inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},buttonText:{type:String,required:!1,default:void 0},disabled:{type:Boolean,default:!1},subtype:{type:String,validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"}},emits:["buttonClicked"],methods:{handleClick(e){this.$emit("buttonClicked",e)}}};function Yt(e,t,s,r,a,n){const o=b("openwb-base-click-button"),c=b("openwb-base-setting-element");return i(),_(c,null,P({title:m(()=>[h(e.$slots,"title",{},()=>[g(v(s.title),1)])]),default:m(()=>[f(o,$({class:(s.disabled?"btn-outline-":"btn-")+s.subtype,disabled:s.disabled},e.$attrs,{onButtonClicked:n.handleClick}),{default:m(()=>[g(v(s.buttonText),1)]),_:1},16,["class","disabled","onButtonClicked"])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help")]),key:"0"}:void 0]),1024)}const Xt=k(Qt,[["render",Yt],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseButtonInput.vue"]]),es=Object.freeze(Object.defineProperty({__proto__:null,default:Xt},Symbol.toStringTag,{value:"Module"}));O.add(Be,$e);const ts={name:"OpenwbCard",components:{FontAwesomeIcon:I},inheritAttrs:!1,props:{title:{type:String,default:void 0},subtype:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark","pink","white"].indexOf(e)!==-1},default:"secondary"},bodyBg:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark","pink","white"].indexOf(e)!==-1},default:"light"},collapsible:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1}},emits:["collapsed","expanded"],data(){return{isCollapsed:this.collapsible&&this.collapsed}},methods:{toggleBody(){this.collapsible===!0&&(this.isCollapsed=!this.isCollapsed,this.$emit(this.isCollapsed?"collapsed":"expanded"))}}},ss={class:"form-group mb-0"},ns={class:"form-row vaRow mb-0 py-2"},os={class:"col"},is={class:"card-actions ml-4"},as={key:0,class:"card-actions mr-2"},ls={key:2,class:"card-footer"};function rs(e,t,s,r,a,n){const o=b("font-awesome-icon");return i(),u("div",{class:B(["card","border-"+s.subtype])},[s.title!==void 0||e.$slots.header?(i(),u("div",{key:0,class:B(["card-header py-1","bg-"+s.subtype]),onClick:t[0]||(t[0]=(...c)=>n.toggleBody&&n.toggleBody(...c))},[l("div",ss,[l("div",ns,[l("div",os,[h(e.$slots,"header",{collapsed:a.isCollapsed},()=>[g(v(s.title),1)],!0)])])]),l("div",is,[e.$slots.actions?(i(),u("div",as,[h(e.$slots,"actions",{collapsed:a.isCollapsed},void 0,!0)])):p("",!0),s.collapsible?(i(),_(o,{key:1,icon:a.isCollapsed?["fas","chevron-right"]:["fas","chevron-down"]},null,8,["icon"])):p("",!0)])],2)):p("",!0),a.isCollapsed===!1?(i(),u("div",$({key:1,class:["card-body",[s.title==null&&!e.$slots.header?"border-radius-top-inherit":"",e.$slots.footer?"":"border-radius-bottom-inherit","bg-"+s.bodyBg]]},e.$attrs),[h(e.$slots,"default",{},void 0,!0)],16)):p("",!0),e.$slots.footer&&a.isCollapsed===!1?(i(),u("div",ls,[h(e.$slots,"footer",{},void 0,!0)])):p("",!0)],2)}const ds=k(ts,[["render",rs],["__scopeId","data-v-9833c353"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseCard.vue"]]),us=Object.freeze(Object.defineProperty({__proto__:null,default:ds},Symbol.toStringTag,{value:"Module"})),cs={name:"OpenwbCheckboxInput",components:{OpenwbBaseSettingElement:L},mixins:[D],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Boolean}},emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},ps={class:"col-md-8"},ms=["id"];function fs(e,t,s,r,a,n){const o=b("openwb-base-setting-element");return i(),_(o,null,P({title:m(()=>[h(e.$slots,"title",{},()=>[g(v(s.title),1)])]),default:m(()=>[l("div",ps,[C(l("input",$({id:`${e.uid}-checkbox-input`,"onUpdate:modelValue":t[0]||(t[0]=c=>n.value=c),class:"form-control",type:"checkbox"},e.$attrs),null,16,ms),[[ue,n.value]])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help")]),key:"0"}:void 0]),1024)}const gs=k(cs,[["render",fs],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseCheckboxInput.vue"]]),bs=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"}));O.add(Ce);const hs={name:"OpenwbColorPicker",components:{FontAwesomeIcon:I},mixins:[D],props:{defaultColor:{type:String,required:!1,default:void 0,validator:e=>/^#[0-9A-F]{6}$/i.test(e)},modelValue:{type:String,required:!1,default:"#000000",validator:e=>/^#[0-9A-F]{6}$/i.test(e)}},emits:["update:model-value"],methods:{changed(e){this.$emit("update:model-value",e)}}},_s={class:"wrapper"},ys=["id","value","title"];function vs(e,t,s,r,a,n){const o=b("font-awesome-icon");return i(),u("div",_s,[l("input",{id:`${e.uid}-color-input`,type:"color",class:"custom-color-picker",value:s.modelValue,title:`Farbe: ${s.modelValue}`,onInput:t[0]||(t[0]=c=>n.changed(c.target.value))},null,40,ys),s.defaultColor?(i(),_(o,{key:0,class:"ml-1 clickable",icon:["fas","rotate-left"],title:`Zurücksetzen auf Standardfarbe (${s.defaultColor})`,onClick:t[1]||(t[1]=c=>n.changed(s.defaultColor))},null,8,["title"])):p("",!0)])}const ws=k(hs,[["render",vs],["__scopeId","data-v-1378b599"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseColorPicker.vue"]]),ks=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"})),{text:K,copy:Ss,copied:Bs,isSupported:$s}=ce({copiedDuring:3e3,legacy:!0});O.add(Ae,Oe);const Cs={name:"OpenwbCopyToClipboard",components:{FontAwesomeIcon:I},props:{tooltip:{type:String,default:"Wert kopieren"}},data(){return{}},computed:{contentText(){return this.$refs.content?this.$refs.content.innerText.trim():""},isCopied(){return Bs.value&&K.value===this.contentText},copySupported(){return $s.value}},methods:{click(){this.copySupported&&Ss(this.contentText).then(()=>{console.debug("Text copied to clipboard:",K.value)}).catch(e=>{console.error("Failed to copy text to clipboard:",e)})}}},As=["title"],Os={ref:"content"};function Is(e,t,s,r,a,n){const o=b("font-awesome-icon");return i(),u("span",{title:n.copySupported&&!n.isCopied?s.tooltip:"",class:B({"copy-me":n.copySupported&&!n.isCopied}),onClick:t[0]||(t[0]=W((...c)=>n.click&&n.click(...c),["stop"]))},[l("span",Os,[h(e.$slots,"default",{},void 0,!0)],512),n.copySupported?(i(),_(o,{key:0,class:"ml-1",icon:n.isCopied?["fas","clipboard-check"]:["fas","clipboard"]},null,8,["icon"])):p("",!0)],10,As)}const qs=k(Cs,[["render",Is],["__scopeId","data-v-81826ebe"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseCopyToClipboard.vue"]]),Ts=Object.freeze(Object.defineProperty({__proto__:null,default:qs},Symbol.toStringTag,{value:"Module"}));O.add(Q,Y,z);const Ms={name:"OpenwbHeading",components:{FontAwesomeIcon:I},inheritAttrs:!1,data(){return{showHelp:!1}},methods:{toggleHelp(){this.showHelp=!this.showHelp&&this.$slots.help!==void 0}}},Vs={class:"heading-text"},Ps={key:0,class:"actions"},Ls={class:""},Ds={key:0,class:"form-row alert alert-info small flex-fill"};function Ws(e,t,s,r,a,n){const o=b("font-awesome-icon");return i(),u(q,null,[l("div",$({class:"card-text card-text-heading"},e.$attrs),[l("div",Vs,[h(e.$slots,"default",{},void 0,!0),e.$slots.help?(i(),_(o,{key:0,icon:a.showHelp?["fas","question-circle"]:["far","question-circle"],class:B(["clickable",a.showHelp?"text-info":""]),onClick:W(n.toggleHelp,["stop"])},null,8,["icon","class","onClick"])):p("",!0)]),e.$slots.actions?(i(),u("span",Ps,[h(e.$slots,"actions",{},void 0,!0)])):p("",!0)],16),l("div",Ls,[a.showHelp?(i(),u("span",Ds,[h(e.$slots,"help",{},void 0,!0)])):p("",!0)])],64)}const Es=k(Ms,[["render",Ws],["__scopeId","data-v-cbe4e96e"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseHeading.vue"]]),xs=Object.freeze(Object.defineProperty({__proto__:null,default:Es},Symbol.toStringTag,{value:"Module"}));O.add(Ie,qe,Te,Me);const x={null:{value:null,icon:["fas","question"],iconClass:"text-secondary",title:"Nicht relevant",nextValue:!0},true:{value:!0,icon:["fas","square"],iconClass:"",title:"Geschlossen",nextValue:!1},false:{value:!1,icon:["far","square"],iconClass:"",title:"Offen",nextValue:null}},js={name:"OpenwbIoPattern",components:{FontAwesomeIcon:I},inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Array,required:!1,default:()=>[]}},emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{getIcon(e){return x[e].icon},getIconClass(e){return x[e].iconClass},getTitle(e){return x[e].title},toggleInput(e,t){this.value[e]=x[t].nextValue}}};function Rs(e,t,s,r,a,n){const o=b("font-awesome-icon"),c=b("openwb-base-setting-element");return i(),_(c,null,P({title:m(()=>[h(e.$slots,"title",{},()=>[g(v(s.title),1)])]),default:m(()=>[(i(!0),u(q,null,V(n.value,(d,y)=>(i(),u("span",{key:y},[f(o,{title:n.getTitle(d),icon:n.getIcon(d),class:B([n.getIconClass(d),"fa-fw clickable"]),size:"2x",transform:d=="undefined"?"shrink-6":null,mask:d=="undefined"?["fas","square"]:null,onClick:W(w=>n.toggleInput(y,d),["stop","prevent"]),onMousedown:t[0]||(t[0]=W(()=>{},["stop","prevent"])),onMouseup:t[1]||(t[1]=W(()=>{},["stop","prevent"]))},null,8,["title","icon","class","transform","mask","onClick"])]))),128))]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help")]),key:"0"}:void 0]),1024)}const Ns=k(js,[["render",Rs],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseIoPattern.vue"]]),zs=Object.freeze(Object.defineProperty({__proto__:null,default:Ns},Symbol.toStringTag,{value:"Module"})),Us={name:"OpenwbModalDialog",props:{title:{type:String,required:!1,default:""},subtype:{type:String,validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"},buttons:{type:Array,default:void 0},footerAlignment:{type:String,validator:function(e){return["around","between","center","end","start"].indexOf(e)!==-1},default:"end"},preventClose:{type:Boolean,default:!1},show:{type:Boolean,default:!1}},emits:["modal-result"],computed:{myButtons(){var e=[];return this.buttons!==void 0&&(e=this.buttons),e.findIndex(t=>t.event==="close")===-1&&!this.preventClose&&e.push({text:"Schließen",event:"close"}),e}},methods:{handleClick(e){e.stopPropagation();let t=e.target.getAttribute("data-event");t===null&&(t="close"),(t!="close"||!this.preventClose)&&this.$emit("modal-result",t)}}},Fs={class:"modal-content"},Hs={class:"modal-title"},Gs={class:"modal-body"},Ks=["data-event"];function Js(e,t,s,r,a,n){return s.show?(i(),_(R,{key:0,to:"body"},[t[5]||(t[5]=l("div",{class:"modal-backdrop fade show"},null,-1)),l("div",{class:"modal fade d-block show",role:"dialog",onClick:t[3]||(t[3]=(...o)=>n.handleClick&&n.handleClick(...o))},[l("div",{class:"modal-dialog modal-dialog-centered modal-dialog-scrollable",role:"document",onClick:t[2]||(t[2]=W(()=>{},["stop"]))},[l("div",Fs,[l("div",{class:B(["modal-header","bg-"+s.subtype])},[l("h4",Hs,v(s.title),1),s.preventClose?p("",!0):(i(),u("button",{key:0,type:"button",class:"close",onClick:t[0]||(t[0]=(...o)=>n.handleClick&&n.handleClick(...o))}," × "))],2),l("div",Gs,[h(e.$slots,"default",{},()=>[t[4]||(t[4]=g("# Body #",-1))])]),n.myButtons.length>0?(i(),u("div",{key:0,class:B(["modal-footer d-flex","justify-content-"+s.footerAlignment])},[(i(!0),u(q,null,V(n.myButtons,o=>(i(),u("button",{key:o.text,type:"button",class:B(["btn",o.subtype?"btn-"+o.subtype:"btn-secondary"]),"data-dismiss":"modal","data-event":o.event?o.event:"close",onClick:t[1]||(t[1]=(...c)=>n.handleClick&&n.handleClick(...c))},v(o.text),11,Ks))),128))],2)):p("",!0)])])])])):p("",!0)}const Zs=k(Us,[["render",Js],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseModalDialog.vue"]]),Qs=Object.freeze(Object.defineProperty({__proto__:null,default:Zs},Symbol.toStringTag,{value:"Module"}));O.add(Ve);const Ys={name:"OpenwbNumberInput",components:{FontAwesomeIcon:I,OpenwbBaseSettingElement:L},mixins:[D],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Number,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},precision:{type:Number,default:void 0},emptyValue:{type:[Number,null],required:!1,default:null}},emits:["update:modelValue"],computed:{value:{get(){return this.precision!==void 0?parseFloat(Math.round(this.modelValue*Math.pow(10,this.precision))/Math.pow(10,this.precision)):this.modelValue},set(e){(isNaN(e)||typeof e!="number")&&(e=this.emptyValue),this.$emit("update:modelValue",e)}}}},Xs={class:"input-group"},en={class:"input-group-prepend"},tn={class:"input-group-text"},sn=["id"],nn={key:0,class:"input-group-append"},on={class:"input-group-text"},an={key:1,class:"input-group-append"},ln={class:"input-group-text p-0"};function rn(e,t,s,r,a,n){const o=b("font-awesome-icon"),c=b("openwb-base-setting-element");return i(),_(c,null,P({title:m(()=>[h(e.$slots,"title",{},()=>[g(v(s.title),1)],!0)]),default:m(()=>[l("div",Xs,[l("div",en,[l("div",tn,[f(o,{icon:["fas","calculator"]})])]),C(l("input",$({id:`${e.uid}-number-input`,"onUpdate:modelValue":t[0]||(t[0]=d=>n.value=d),type:"number",class:"form-control"},e.$attrs),null,16,sn),[[M,n.value,void 0,{number:!0}]]),s.unit?(i(),u("div",nn,[l("div",on,v(s.unit),1)])):p("",!0),e.$slots.append?(i(),u("div",an,[l("div",ln,[h(e.$slots,"append",{},void 0,!0)])])):p("",!0)])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const dn=k(Ys,[["render",rn],["__scopeId","data-v-c2fb7eef"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseNumberInput.vue"]]),un=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"}));O.add(Pe,Le);const cn={name:"OpenwbRangeInput",components:{FontAwesomeIcon:I,OpenwbBaseSettingElement:L},mixins:[D],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Number,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:100},step:{type:Number,required:!1,default:1},labels:{type:Array,required:!1,default:void 0}},emits:["update:modelValue"],computed:{label(){var e;return this.labels&&this.sliderValue!=null?this.sliderValue<this.labels.length?e=this.labels[this.sliderValue].label:console.error("index out of bounds: "+this.sliderValue):e=this.sliderValue,typeof e=="number"&&(e=e.toLocaleString(void 0,{minimumFractionDigits:this.precision,maximumFractionDigits:this.precision}),this.unit&&(e+=" "+this.unit)),e},precision(){if(!isFinite(this.step))return 0;for(var e=1,t=0;Math.round(this.step*e)/e!==this.step;)e*=10,t++;return t},sliderValue:{get(){if(this.labels){var e=void 0;for(let t=0;t<this.labels.length;t++)if(this.labels[t].value==this.modelValue){e=t;break}return e===void 0&&this.modelValue!==void 0?(console.warn("sliderValue: not found in values: ",this.modelValue,"using min as default: ",this.min),this.min):e}return this.modelValue},set(e){if(this.labels){var t=this.labels[e].value;this.$emit("update:modelValue",t)}else this.$emit("update:modelValue",e)}}},methods:{increment(){var e=Math.min(this.sliderValue+this.step,this.max);this.sliderValue=Math.round(e*Math.pow(10,this.precision))/Math.pow(10,this.precision)},decrement(){var e=Math.max(this.sliderValue-this.step,this.min);this.sliderValue=Math.round(e*Math.pow(10,this.precision))/Math.pow(10,this.precision)}}},pn={class:"w-100"},mn={class:"vaRow mb-1 w-100"},fn=["for"],gn=["id"],bn={class:"col"},hn=["min","max","step"];function _n(e,t,s,r,a,n){const o=b("font-awesome-icon"),c=b("openwb-base-setting-element");return i(),_(c,null,P({title:m(()=>[h(e.$slots,"title",{},()=>[g(v(s.title),1)],!0)]),default:m(()=>[l("div",pn,[l("div",mn,[n.label?(i(),u("label",{key:0,class:"col-2 pl-0 col-form-label valueLabel",for:`${e.uid}-button`},v(n.label),9,fn)):p("",!0),l("button",{id:`${e.uid}-button`,class:"col-1 btn btn-block btn-info",type:"button",onClick:t[0]||(t[0]=(...d)=>n.decrement&&n.decrement(...d))},[f(o,{icon:["fas","step-backward"]})],8,gn),l("div",bn,[C(l("input",$({"onUpdate:modelValue":t[1]||(t[1]=d=>n.sliderValue=d),type:"range",class:"form-control-range rangeInput",min:s.min,max:s.max,step:s.step},e.$attrs),null,16,hn),[[M,n.sliderValue,void 0,{number:!0}]])]),l("button",{class:"col-1 btn btn-block btn-info",type:"button",onClick:t[2]||(t[2]=(...d)=>n.increment&&n.increment(...d))},[f(o,{icon:["fas","step-forward"]})])])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const yn=k(cn,[["render",_n],["__scopeId","data-v-449fb0a5"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseRangeInput.vue"]]),vn=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"}));O.add(N);const wn={name:"OpenwbSelectInput",components:{FontAwesomeIcon:I,OpenwbBaseSettingElement:L},mixins:[D],inheritAttrs:!1,props:{title:{type:String,required:!1,default:void 0},modelValue:{type:[String,Number,Array,null],required:!1,default:void 0},emptyValue:{type:[String,Number,Array],required:!1,default:void 0},groups:{type:Array,required:!1,default:void 0},options:{type:Array,required:!1,default:void 0},notSelected:{type:String,default:void 0},addButton:{type:Boolean,default:!1}},emits:["update:modelValue","input:add"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},addDisabled:{get(){return this.value===void 0}}},methods:{addClicked(){this.addDisabled||this.$emit("input:add")}}},kn={class:"w-100"},Sn={class:"input-group"},Bn={key:0,class:"input-group-prepend"},$n={class:"input-group-text"},Cn=["id"],An=["value"],On=["value"],In=["label"],qn=["value"],Tn={key:1,class:"input-group-append"};function Mn(e,t,s,r,a,n){const o=b("font-awesome-icon"),c=b("openwb-base-setting-element");return i(),_(c,null,P({default:m(()=>[l("div",kn,[l("div",Sn,[e.$slots.prefix?(i(),u("div",Bn,[l("div",$n,[h(e.$slots,"prefix")])])):p("",!0),C(l("select",$({id:`${e.uid}-select`,"onUpdate:modelValue":t[0]||(t[0]=d=>n.value=d),class:"col form-control"},e.$attrs),[s.notSelected!==void 0?(i(),u("option",{key:0,value:s.emptyValue,disabled:""}," -- "+v(s.notSelected)+" -- ",9,An)):p("",!0),(i(!0),u(q,null,V(s.options,d=>(i(),u("option",{key:d.value,value:d.value},v(d.text),9,On))),128)),(i(!0),u(q,null,V(s.groups,d=>(i(),u("optgroup",{key:d.label,label:d.label},[(i(!0),u(q,null,V(d.options,y=>(i(),u("option",{key:y.value,value:y.value},v(y.text),9,qn))),128))],8,In))),128))],16,Cn),[[Z,n.value]]),s.addButton?(i(),u("div",Tn,[l("div",{class:B(["input-group-text",n.addDisabled?"not-clickable":"bg-success clickable"]),onClick:t[1]||(t[1]=d=>n.addClicked())},[h(e.$slots,"inputAdd",{},()=>[f(o,{icon:["fas","plus"]})])],2)])):p("",!0)])])]),_:2},[e.$slots.title||s.title?{name:"title",fn:m(()=>[h(e.$slots,"title",{},()=>[g(v(s.title),1)])]),key:"0"}:void 0,e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help")]),key:"1"}:void 0]),1024)}const Vn=k(wn,[["render",Mn],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseSelectInput.vue"]]),Pn=Object.freeze(Object.defineProperty({__proto__:null,default:Vn},Symbol.toStringTag,{value:"Module"}));O.add(z,De,We);const Ln={name:"OpenwbSubmitButtons",components:{FontAwesomeIcon:I},props:{formName:{type:String,default:void 0},hideReset:{type:Boolean,default:!1},hideDefaults:{type:Boolean,default:!0},saveLabel:{type:String,default:"Speichern"},saveDisabled:{type:Boolean,default:!1},saveId:{type:String,default:"saveSettingsBtn"},resetLabel:{type:String,default:"Änderungen verwerfen"},resetDisabled:{type:Boolean,default:!1},resetId:{type:String,default:"modalResetBtn"},defaultsLabel:{type:String,default:"Werkseinstellungen"},defaultsDisabled:{type:Boolean,default:!1},defaultsId:{type:String,default:"modalDefaultsBtn"}},emits:["reset","defaults","save"],data(){return{showModalReset:!1,showModalDefaults:!1}},computed:{showModalSave(){return this.$store.state.local.savingData}},methods:{showResetModal(){this.showModalReset=!0},handleModalReset(e){this.showModalReset=!1,e=="confirm"&&this.$emit("reset")},showDefaultsModal(){this.showModalDefaults=!0},handleModalDefaults(e){this.showModalDefaults=!1,e=="confirm"&&this.$emit("defaults")},saveSettings(){if(this.formName){if(!document.forms[this.formName].reportValidity()){console.debug("form invalid");return}}else console.debug("no form to validate");this.$emit("save")}}},Dn={class:"row justify-content-center mb-1"},Wn={class:"col-md-4 d-flex py-1 justify-content-center"},En=["id","disabled"],xn={key:0,class:"col-md-4 d-flex py-1 justify-content-center"},jn=["id","disabled"],Rn={key:1,class:"col-md-4 d-flex py-1 justify-content-center"},Nn=["id","disabled"];function zn(e,t,s,r,a,n){const o=b("openwb-base-modal-dialog"),c=b("font-awesome-icon");return i(),u(q,null,[f(o,{show:n.showModalSave,title:"Speichern",subtype:"success","prevent-close":!0},{default:m(()=>[...t[3]||(t[3]=[g(" Einstellungen werden gespeichert... ",-1)])]),_:1},8,["show"]),f(o,{show:a.showModalReset,title:"Änderungen verwerfen",subtype:"warning",buttons:[{text:"Ok",event:"confirm",subtype:"warning"}],onModalResult:n.handleModalReset},{default:m(()=>[...t[4]||(t[4]=[g(" Wollen Sie die nicht gespeicherten Änderungen wirklich verwerfen? ",-1)])]),_:1},8,["show","onModalResult"]),f(o,{show:a.showModalDefaults,title:"Werkseinstellungen",subtype:"danger",buttons:[{text:"Ok",event:"confirm",subtype:"danger"}],onModalResult:n.handleModalDefaults},{default:m(()=>[...t[5]||(t[5]=[g(" Wollen Sie wirklich alle Werte dieser Seite auf die Werkseinstellungen zurücksetzen? ",-1)])]),_:1},8,["show","onModalResult"]),l("div",Dn,[l("div",Wn,[l("button",{id:s.saveId,type:"button",class:B(["btn btn-block",[{disabled:s.saveDisabled},s.saveDisabled?"btn-outline-success":"btn-success"]]),disabled:s.saveDisabled,onClick:t[0]||(t[0]=(...d)=>n.saveSettings&&n.saveSettings(...d))},[g(v(s.saveLabel)+" ",1),f(c,{icon:["fas","check"]})],10,En)]),s.hideReset?p("",!0):(i(),u("div",xn,[l("button",{id:s.resetId,type:"button",class:B(["btn btn-block",[{disabled:s.resetDisabled},s.resetDisabled?"btn-outline-warning":"btn-warning"]]),disabled:s.saveDisabled,onClick:t[1]||(t[1]=(...d)=>n.showResetModal&&n.showResetModal(...d))},[g(v(s.resetLabel)+" ",1),f(c,{icon:["fas","undo"]})],10,jn)])),s.hideDefaults?p("",!0):(i(),u("div",Rn,[l("button",{id:s.defaultsId,type:"button",class:B(["btn btn-block",[{disabled:s.defaultsDisabled},s.defaultsDisabled?"btn-outline-danger":"btn-danger"]]),disabled:s.saveDisabled,onClick:t[2]||(t[2]=(...d)=>n.showDefaultsModal&&n.showDefaultsModal(...d))},[g(v(s.defaultsLabel)+" ",1),f(c,{icon:["fas","times"]})],10,Nn)]))])],64)}const Un=k(Ln,[["render",zn],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseSubmitButtons.vue"]]),Fn=Object.freeze(Object.defineProperty({__proto__:null,default:Un},Symbol.toStringTag,{value:"Module"}));O.add(X,Ee,xe,je,Re,Ne,ee,ze,Ue,Fe,He,N,Ge,Ke);const Hn={name:"OpenwbTextInput",components:{FontAwesomeIcon:I,OpenwbBaseSettingElement:L},mixins:[D],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:[String,Object],required:!1,default:void 0},subtype:{validator:function(e){return["text","email","host","url","user","group","json","password","time","date","month","year"].indexOf(e)!==-1},default:"text"},pattern:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},emptyValue:{type:[String,Object,null],required:!1,default:null},showQuickButtons:{type:Boolean,default:!1},addButton:{type:Boolean,default:!1}},emits:["update:modelValue","input:add"],data(){return{showPassword:!1,inputInvalid:!1,tempValue:this.modelValue}},computed:{value:{get(){return this.subtype=="json"?this.inputInvalid?(console.warn("returning invalid String"),this.tempValue):JSON.stringify(this.tempValue):this.modelValue},set(e){if(this.subtype=="json")try{let t=JSON.parse(e);this.inputInvalid=!1,this.$refs.jsonInput.setCustomValidity(""),this.tempValue=t,this.$emit("update:modelValue",t)}catch(t){console.error("parsing JSON failed: "+e,t),this.inputInvalid=!0,this.$refs.jsonInput.setCustomValidity("Ungültiger JSON Ausdruck!"),this.tempValue=e}else e==""&&(e=this.emptyValue),this.$emit("update:modelValue",e)}},inputRef(){switch(this.subtype){case"json":return this.$refs.jsonInput;case"password":return this.$refs.passwordInput;case"host":return this.$refs.hostInput;case"email":case"url":return this.$refs.urlInput;case"time":return this.$refs.timeInput;case"date":return this.$refs.dateInput;case"month":return this.$refs.monthInput;case"year":return this.$refs.yearInput}return this.$refs.textInput},hostPattern(){return"(^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$)|(^(?=.*[a-zA-Z].*$)([a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])$)|(^((?=[^.]*[a-zA-Z][^.]*\\.)([a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9]\\.))+((?=[^.]*[a-zA-Z].*$)([a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9]))$)"},addDisabled:{get(){return this.value===this.emptyValue}}},methods:{togglePassword(){this.showPassword=!this.showPassword},modify(e){var t,s=new Date(this.modelValue);switch(this.subtype){case"date":s.setDate(s.getDate()+e),t=String(s.getFullYear())+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0");break;case"month":s.setMonth(s.getMonth()+e),t=String(s.getFullYear())+"-"+String(s.getMonth()+1).padStart(2,"0");break;case"year":s.setYear(s.getFullYear()+e),t=String(s.getFullYear());break;default:console.warn(`cannot modify input of subtype '${this.subtype}'`);return}t>this.inputRef.max||t<this.inputRef.min||(this.value=t)},addClicked(){this.addDisabled||this.$emit("input:add")}}},Gn={class:"w-100"},Kn={class:"input-group"},Jn={class:"input-group-prepend"},Zn={class:"input-group-text"},Qn=["id","pattern"],Yn=["id","pattern"],Xn=["id","type","pattern"],eo=["id","pattern"],to=["id","type"],so=["id"],no=["id"],oo=["id"],io=["id"],ao={key:9,class:"input-group-append"},lo={class:"input-group-text"},ro={class:"input-group-text"},uo={key:13,class:"input-group-append"},co={key:14,class:"input-group-append"},po={class:"input-group-text p-0"};function mo(e,t,s,r,a,n){const o=b("font-awesome-icon"),c=b("openwb-base-setting-element");return i(),_(c,null,P({title:m(()=>[h(e.$slots,"title",{},()=>[g(v(s.title),1)],!0)]),default:m(()=>[l("div",Gn,[l("div",Kn,[l("div",Jn,[l("div",Zn,[s.subtype=="text"?(i(),_(o,{key:0,icon:["fas","keyboard"]})):p("",!0),s.subtype=="email"?(i(),_(o,{key:1,icon:["fas","envelope"]})):p("",!0),s.subtype=="host"?(i(),_(o,{key:2,icon:["fas","network-wired"]})):p("",!0),s.subtype=="url"?(i(),_(o,{key:3,icon:["fas","globe"]})):p("",!0),s.subtype=="user"?(i(),_(o,{key:4,icon:["fas","user"]})):p("",!0),s.subtype=="group"?(i(),_(o,{key:5,icon:["fas","users"]})):p("",!0),s.subtype=="json"?(i(),_(o,{key:6,icon:["fas","code"]})):p("",!0),s.subtype=="password"?(i(),_(o,{key:7,icon:a.showPassword?["fas","unlock"]:["fas","lock"]},null,8,["icon"])):p("",!0),s.subtype=="time"?(i(),_(o,{key:8,icon:["fas","clock"]})):p("",!0),s.subtype=="date"||s.subtype=="month"||s.subtype=="year"?(i(),_(o,{key:9,icon:["fas","calendar-day"]})):p("",!0)])]),["text","user","group"].includes(s.subtype)?C((i(),u("input",$({key:0,id:`${e.uid}-text-input`,ref:"textInput","onUpdate:modelValue":t[0]||(t[0]=d=>n.value=d),type:"text",class:["form-control",{invalid:a.inputInvalid}]},e.$attrs,{pattern:s.pattern}),null,16,Qn)),[[M,n.value]]):p("",!0),s.subtype=="json"?C((i(),u("input",$({key:1,id:`${e.uid}-json-input`,ref:"jsonInput","onUpdate:modelValue":t[1]||(t[1]=d=>n.value=d),type:"text",class:"form-control"},e.$attrs,{pattern:s.pattern}),null,16,Yn)),[[M,n.value]]):p("",!0),s.subtype=="password"?C((i(),u("input",$({key:2,id:`${e.uid}-password-input`,ref:"passwordInput","onUpdate:modelValue":t[2]||(t[2]=d=>n.value=d),type:a.showPassword?"text":"password",class:"form-control"},e.$attrs,{pattern:s.pattern}),null,16,Xn)),[[G,n.value]]):p("",!0),s.subtype=="host"?C((i(),u("input",$({key:3,id:`${e.uid}-host-input`,ref:"hostInput","onUpdate:modelValue":t[3]||(t[3]=d=>n.value=d),type:"text",class:"form-control"},e.$attrs,{pattern:n.hostPattern}),null,16,eo)),[[M,n.value]]):p("",!0),["email","url"].includes(s.subtype)?C((i(),u("input",$({key:4,id:`${e.uid}-url-input`,"onUpdate:modelValue":t[4]||(t[4]=d=>n.value=d),refs:"urlInput",type:s.subtype,class:"form-control"},e.$attrs),null,16,to)),[[G,n.value]]):p("",!0),s.subtype=="time"?C((i(),u("input",$({key:5,id:`${e.uid}-time-input`,ref:"timeInput","onUpdate:modelValue":t[5]||(t[5]=d=>n.value=d),type:"time",class:"form-control"},e.$attrs),null,16,so)),[[M,n.value]]):p("",!0),s.subtype=="date"?C((i(),u("input",$({key:6,id:`${e.uid}-date-input`,ref:"dateInput","onUpdate:modelValue":t[6]||(t[6]=d=>n.value=d),type:"date",class:"form-control"},e.$attrs),null,16,no)),[[M,n.value]]):p("",!0),s.subtype=="month"?C((i(),u("input",$({key:7,id:`${e.uid}-month-input`,ref:"monthInput","onUpdate:modelValue":t[7]||(t[7]=d=>n.value=d),type:"month",class:"form-control"},e.$attrs),null,16,oo)),[[M,n.value]]):p("",!0),s.subtype=="year"?C((i(),u("input",$({key:8,id:`${e.uid}-year-input`,ref:"yearInput","onUpdate:modelValue":t[8]||(t[8]=d=>n.value=d),type:"number",class:"form-control"},e.$attrs),null,16,io)),[[M,n.value]]):p("",!0),s.unit?(i(),u("div",ao,[l("div",lo,v(s.unit),1)])):p("",!0),s.subtype=="password"?(i(),u("div",{key:10,class:"input-group-append clickable",onClick:t[9]||(t[9]=(...d)=>n.togglePassword&&n.togglePassword(...d))},[l("div",ro,[f(o,{icon:a.showPassword?["far","eye"]:["far","eye-slash"]},null,8,["icon"])])])):p("",!0),s.showQuickButtons&&(s.subtype=="date"||s.subtype=="month"||s.subtype=="year")?(i(),u("div",{key:11,class:"input-group-append clickable",onClick:t[10]||(t[10]=d=>n.modify(-1))},[...t[13]||(t[13]=[l("div",{class:"input-group-text"},"-",-1)])])):p("",!0),s.showQuickButtons&&(s.subtype=="date"||s.subtype=="month"||s.subtype=="year")?(i(),u("div",{key:12,class:"input-group-append clickable",onClick:t[11]||(t[11]=d=>n.modify(1))},[...t[14]||(t[14]=[l("div",{class:"input-group-text"},"+",-1)])])):p("",!0),s.addButton?(i(),u("div",uo,[l("div",{class:B(["input-group-text",n.addDisabled?"not-clickable":"bg-success clickable"]),onClick:t[12]||(t[12]=d=>n.addClicked())},[h(e.$slots,"inputAdd",{},()=>[f(o,{icon:["fas","plus"]})],!0)],2)])):p("",!0),e.$slots.append?(i(),u("div",co,[l("div",po,[h(e.$slots,"append",{},void 0,!0)])])):p("",!0)])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const fo=k(Hn,[["render",mo],["__scopeId","data-v-6927d479"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseTextInput.vue"]]),go=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"}));O.add(X,ee);const bo={name:"OpenwbTextareaInput",components:{OpenwbBaseSettingElement:L,FontAwesomeIcon:I},mixins:[D],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:[String,Object],required:!1,default:void 0},subtype:{validator:function(e){return["text","json"].indexOf(e)!==-1},default:"text"}},emits:["update:modelValue"],data(){return{inputInvalid:!1,tempValue:this.modelValue}},computed:{value:{get(){return this.subtype=="json"?this.inputInvalid?(console.debug("returning invalid JSON as String"),this.tempValue):JSON.stringify(this.tempValue,void 0,2):this.modelValue},set(e){if(this.subtype=="json")try{let t=JSON.parse(e);this.inputInvalid=!1,this.$refs.jsonInput.setCustomValidity(""),this.tempValue=t,this.$emit("update:modelValue",t)}catch(t){console.warn("parsing JSON failed: "+e,t),this.inputInvalid=!0,this.$refs.jsonInput.setCustomValidity("Ungültiger JSON Ausdruck!"),this.tempValue=e}else this.$emit("update:modelValue",e)}},length:{get(){return this.value!==void 0?this.value.length:0}}}},ho={class:"w-100"},_o={class:"input-group"},yo={class:"input-group-prepend"},vo={class:"input-group-text"},wo=["id"],ko=["id"],So={key:2,class:"input-group-append"},Bo={class:"input-group-text"},$o={class:"form-text text-muted text-right"};function Co(e,t,s,r,a,n){const o=b("font-awesome-icon"),c=b("openwb-base-setting-element");return i(),_(c,null,P({title:m(()=>[h(e.$slots,"title",{},()=>[g(v(s.title),1)],!0)]),default:m(()=>[l("div",ho,[l("div",_o,[l("div",yo,[l("div",vo,[s.subtype=="text"?(i(),_(o,{key:0,icon:["fas","keyboard"]})):p("",!0),s.subtype=="json"?(i(),_(o,{key:1,icon:["fas","code"]})):p("",!0)])]),s.subtype==="json"?C((i(),u("textarea",$({key:0,id:`${e.uid}-textarea`,ref:"jsonInput","onUpdate:modelValue":t[0]||(t[0]=d=>n.value=d),class:"form-control"},e.$attrs),null,16,wo)),[[M,n.value,void 0,{lazy:!0}]]):C((i(),u("textarea",$({key:1,id:`${e.uid}-textarea`,"onUpdate:modelValue":t[1]||(t[1]=d=>n.value=d),class:"form-control"},e.$attrs),null,16,ko)),[[M,n.value]]),e.$attrs.maxlength?(i(),u("div",So,[l("div",Bo,[l("small",$o,v(n.length)+" / "+v(e.$attrs.maxlength),1)])])):p("",!0)])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const Ao=k(bo,[["render",Co],["__scopeId","data-v-3d93046b"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseTextarea.vue"]]),Oo=Object.freeze(Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"})),Io={name:"OpenwbToast",props:{topic:{type:String,required:!0},subtype:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"},source:{type:String,required:!0,validator:function(e){return["system","client","command"].indexOf(e)!==-1}},timestamp:{type:Number,required:!0}},emits:["dismiss","hide"],data(){return{handle:void 0,relativeTime:void 0,hidden:!1}},mounted(){this.handle=window.setInterval(this.updateRelativeTime,1e3)},unmounted(){window.clearInterval(this.handle)},methods:{dismiss(){this.$emit("dismiss",{topic:this.topic})},updateRelativeTime(){const e={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3};var t=new Intl.RelativeTimeFormat("de",{numeric:"auto"});const r=new Date-this.timestamp*1e3;for(var a in e)if(Math.abs(r)>e[a]){this.relativeTime=t.format(Math.round(-r/e[a]),a);break}r>10*1e3&&!this.hidden&&(this.hidden=!0,this.$emit("hide",{topic:this.topic}))}}},qo={key:0,class:"time-diff"},To={class:"toast-body"};function Mo(e,t,s,r,a,n){return i(),u("div",{class:B(["toast","border-"+s.subtype]),role:"alert"},[l("div",{class:B(["toast-header","bg-"+s.subtype])},[t[2]||(t[2]=l("strong",{class:"pr-2 mr-auto"},"openWB",-1)),s.timestamp?(i(),u("small",qo,v(a.relativeTime),1)):p("",!0),l("button",{type:"button",class:"ml-2 mb-1 close","data-dismiss":"toast","aria-label":"Close",onClick:t[0]||(t[0]=(...o)=>n.dismiss&&n.dismiss(...o))},[...t[1]||(t[1]=[l("span",{"aria-hidden":"true"},"×",-1)])])],2),l("div",To,[h(e.$slots,"default",{},void 0,!0)])],2)}const Vo=k(Io,[["render",Mo],["__scopeId","data-v-c51b5764"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseToast.vue"]]),Po=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Lo={name:"ComponentState",emits:["reset","defaults","save"],data(){return{mqttTopicsToSubscribe:[]}},computed:{weekdays(){return["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"]},chargeModes(){return["instant_charging","pv_charging","scheduled_charging","time_charging","eco_charging","stop"]},statusLevel(){return["success","warning","danger"]},stateIcon:{get(){switch(this.$store.state.mqtt[this.baseTopic+"/get/fault_state"]){case 0:return["fas","check-circle"];case 1:return["fas","exclamation-triangle"];case 2:return["fas","times-circle"];default:return["fas","check-circle"]}}}},mounted(){this.mqttTopicsToSubscribe.length>0&&this.$root.doSubscribe(this.mqttTopicsToSubscribe)},unmounted(){this.mqttTopicsToSubscribe.length>0&&this.$root.doUnsubscribe(this.mqttTopicsToSubscribe)},methods:{updateState(e,t,s=void 0){console.debug("updateState:",e,t,s),this.$store.commit({type:"updateTopic",topic:e,objectPath:s,payload:t})},ac_current2dc_power(e){return parseFloat((e*3*230/1e3).toFixed(0))},dc_power2ac_current(e){return parseFloat((e*1e3/230/3).toFixed(2))},getWildcardIndexList(e,t=!1){let s=e;t||(s="^"+e.replaceAll("/","\\/").replaceAll("+","[^+/]+").replaceAll("#","[^#/]+")+"$");let r=Object.keys(this.$store.state.mqtt).filter(a=>a.match(s));return r.forEach((a,n,o)=>{o[n]=parseInt(a.match(/(?:\/)([0-9]+)(?=\/)*/g)[0].replace(/[^0-9]+/g,""))}),r},getWildcardTopics(e,t=!1){let s=e;return t||(s="^"+e.replaceAll("/","\\/").replaceAll("+","[^+/]+").replaceAll("#","[^#/]+")+"$"),Object.keys(this.$store.state.mqtt).filter(r=>r.match(s)).reduce((r,a)=>({...r,[a]:this.$store.state.mqtt[a]}),{})},formatDate(e,t={year:"numeric",month:"2-digit",day:"2-digit"}){return new Date(e).toLocaleDateString(void 0,t)},formatNumber(e,t=0,s=t,r=1){if(!(e==null||isNaN(e)))return e=e*r,e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:s})},formatNumberTopic(e,t=0,s=t,r=1){return this.$store.state.mqtt[e]?this.formatNumber(this.$store.state.mqtt[e],t,s,r):"-"},formatPhaseArrayNumberTopic(e,t=0,s=t,r=1){return this.$store.state.mqtt[e]?this.$store.state.mqtt[e].map(a=>this.formatNumber(a,t,s,r)):["-","-","-"]},translateChargeMode(e){switch(e){case"instant_charging":return"Sofort";case"pv_charging":return"PV";case"scheduled_charging":return"Zielladen";case"time_charging":return"Zeitladen";case"eco_charging":return"Eco";case"standby":return"Standby";case"stop":return"Stop";default:return console.warn("unknown charge mode:",e),e}},getFaultStateSubtype(e){const t=this.$store.state.mqtt[e+"/get/fault_state"];if(t===void 0)return"warning";switch(t){case 0:return"success";case 1:return"warning";case 2:return"danger";default:return"dark"}}}},j=k(Lo,[["__file","/opt/openWB-dev/openwb-ui-settings/src/components/mixins/ComponentState.vue"]]);O.add(Je);const Do={name:"OpenwbNavBar",components:{FontAwesomeIcon:I},mixins:[j],data(){return{mqttTopicsToSubscribe:["openWB/system/security/settings_accessible","openWB/system/security/status_accessible","openWB/system/security/charge_log_accessible","openWB/system/security/chart_accessible"]}},computed:{nodeEnv(){return"development"},settingsAccessible(){return this.$store.state.mqtt["openWB/system/security/settings_accessible"]===!0},statusAccessible(){return this.$store.state.mqtt["openWB/system/security/status_accessible"]===!0},chargeLogAccessible(){return this.$store.state.mqtt["openWB/system/security/charge_log_accessible"]===!0},chartAccessible(){return this.$store.state.mqtt["openWB/system/security/chart_accessible"]===!0}},watch:{$route(){this.$refs.collapsibleNavbar.classList.remove("show"),this.$refs.navbarButton.classList.add("collapsed"),this.$refs.navbarButton.setAttribute("aria-expanded",!1)}}},Wo={class:"navbar navbar-expand-lg bg-dark navbar-dark fixed-top"},Eo={ref:"navbarButton",class:"navbar-toggler mr-auto",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavbar"},xo={id:"collapsibleNavbar",ref:"collapsibleNavbar",class:"collapse navbar-collapse navbar-nav-scroll"},jo={class:"navbar-nav mr-auto"},Ro={key:0,class:"nav-item nav-separator-after"},No={key:1,class:"nav-item dropdown nav-separator-after"},zo={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Uo={key:2,class:"nav-item dropdown"},Fo={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Ho={key:3,class:"nav-item dropdown"},Go={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Ko={key:4,class:"nav-item dropdown"},Jo={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Zo={key:5,class:"nav-item dropdown"},Qo={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Yo={class:"nav-item nav-separator-before"},Xo={class:"nav-link",href:"https://wiki.openwb.de/",target:"_blank"};function ei(e,t,s,r,a,n){const o=b("router-link"),c=b("font-awesome-icon");return i(),u("nav",Wo,[t[32]||(t[32]=l("a",{class:"navbar-brand",href:"/openWB/web/"},[l("span",null,"openWB")],-1)),l("button",Eo,[...t[0]||(t[0]=[l("span",{class:"navbar-toggler-icon"},null,-1)])],512),l("div",xo,[l("ul",jo,[n.statusAccessible?(i(),u("li",Ro,[f(o,{to:"/Status",class:"nav-link","active-class":"active disabled"},{default:m(()=>[...t[1]||(t[1]=[g(" Status ",-1)])]),_:1})])):p("",!0),n.chargeLogAccessible||n.chartAccessible?(i(),u("li",No,[t[4]||(t[4]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Auswertungen ",-1)),l("div",zo,[n.chargeLogAccessible?(i(),_(o,{key:0,to:"/Logging/ChargeLog",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[2]||(t[2]=[g(" Ladeprotokoll ",-1)])]),_:1})):p("",!0),n.chartAccessible?(i(),_(o,{key:1,to:"/Logging/Chart",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[3]||(t[3]=[g(" Diagramme ",-1)])]),_:1})):p("",!0)])])):p("",!0),n.settingsAccessible?(i(),u("li",Uo,[t[8]||(t[8]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Einstellungen ",-1)),l("div",Fo,[f(o,{to:"/GeneralConfig",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[5]||(t[5]=[g(" Allgemein ",-1)])]),_:1}),f(o,{to:"/OptionalComponents",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[6]||(t[6]=[g(" Display ",-1)])]),_:1}),f(o,{to:"/IdentificationConfig",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[7]||(t[7]=[g(" Identifikation ",-1)])]),_:1})])])):p("",!0),n.settingsAccessible?(i(),u("li",Ho,[t[12]||(t[12]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Ladeeinstellungen ",-1)),l("div",Go,[f(o,{to:"/GeneralChargeConfig",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[9]||(t[9]=[g(" Übergreifendes ",-1)])]),_:1}),f(o,{to:"/SurplusChargeConfig",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[10]||(t[10]=[g(" Überschuss-Laden ",-1)])]),_:1}),f(o,{to:"/ActiveBatControl",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[11]||(t[11]=[g(" Speichersteuerung ",-1)])]),_:1})])])):p("",!0),n.settingsAccessible?(i(),u("li",Ko,[t[20]||(t[20]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Konfiguration ",-1)),l("div",Jo,[f(o,{to:"/HardwareInstallation",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[13]||(t[13]=[g(" Geräte und Komponenten ",-1)])]),_:1}),f(o,{to:"/LoadManagementConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[14]||(t[14]=[g(" Lastmanagement ",-1)])]),_:1}),f(o,{to:"/ChargePointInstallation",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[15]||(t[15]=[g(" Ladepunkte ",-1)])]),_:1}),f(o,{to:"/VehicleConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[16]||(t[16]=[g(" Fahrzeuge ",-1)])]),_:1}),f(o,{to:"/IoConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[17]||(t[17]=[g(" Ein-/Ausgänge ",-1)])]),_:1}),t[18]||(t[18]=l("div",{class:"dropdown-divider"},null,-1)),t[19]||(t[19]=l("a",{href:"modules/legacy_smart_home/smarthomeconfig.php",class:"dropdown-item",target:"_blank"}," SmartHome ",-1))])])):p("",!0),n.settingsAccessible?(i(),u("li",Zo,[t[30]||(t[30]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," System ",-1)),l("div",Qo,[f(o,{to:"/System/InstallAssistant",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[21]||(t[21]=[g(" Einrichtungsassistent ",-1)])]),_:1}),f(o,{to:"/System/CloudConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[22]||(t[22]=[g(" openWB Cloud ",-1)])]),_:1}),f(o,{to:"/System/MqttBridgeConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[23]||(t[23]=[g(" MQTT-Brücken ",-1)])]),_:1}),f(o,{to:"/System/DebugConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[24]||(t[24]=[g(" Fehlersuche ",-1)])]),_:1}),f(o,{to:"/System/Support",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[25]||(t[25]=[g(" Support ",-1)])]),_:1}),f(o,{to:"/System/DataManagement",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[26]||(t[26]=[g(" Datenverwaltung ",-1)])]),_:1}),f(o,{to:"/System/SecurityConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[27]||(t[27]=[g(" Sicherheit ",-1)])]),_:1}),f(o,{to:"/System/SystemConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[28]||(t[28]=[g(" System ",-1)])]),_:1}),f(o,{to:"/System/LegalSettings",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[29]||(t[29]=[g(" Rechtliches ",-1)])]),_:1})])])):p("",!0),l("li",Yo,[l("a",Xo,[t[31]||(t[31]=g(" Wiki ",-1)),f(c,{icon:["fas","external-link-alt"]})])])])],512),t[33]||(t[33]=l("div",{id:"infobar",class:"ml-auto d-flex flex-row align-items-center"},null,-1))])}const ti=k(Do,[["render",ei],["__scopeId","data-v-e7a6d0c0"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageNavbar.vue"]]),si={name:"OpenwbPageFooter"},ni={id:"footer",class:"footer bg-dark text-light font-small"},oi={class:"container text-center"};function ii(e,t,s,r,a,n){return i(),u("footer",ni,[l("div",oi,[l("small",null," Sie befinden sich hier: Einstellungen / "+v(e.$route.meta.heading),1)])])}const ai=k(si,[["render",ii],["__scopeId","data-v-3c9a239a"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageFooter.vue"]]);O.add(Ze,Qe,Ye,Xe);const li={name:"OpenwbPageUser",components:{FontAwesomeIcon:I,FontAwesomeLayers:te},mixins:[j],data(){return{mqttTopicsToSubscribe:["openWB/system/security/user_management_active","openWB/system/security/access_allowed"],showLoginModal:!1,showLogoutModal:!1,username:"",password:""}},computed:{loggedInUser(){return this.$store.state.local.username||null},userManagementActive(){return this.$store.state.mqtt["openWB/system/security/user_management_active"]!==!1},accessAllowed(){return this.$store.state.mqtt["openWB/system/security/access_allowed"]===void 0?!1:this.$store.state.mqtt["openWB/system/security/access_allowed"]===!0},anonymousAccessAllowed(){return this.accessAllowed&&this.loggedInUser===null}},watch:{loggedInUser(e){e&&this.checkAutoLogin()},accessAllowed(){this.checkAutoLogin()}},mounted(){pe(()=>{this.checkAutoLogin()})},methods:{checkAutoLogin(){console.debug("Checking auto login: ",this.userManagementActive,this.accessAllowed,this.loggedInUser),this.userManagementActive&&!this.accessAllowed?this.showLoginModal=!0:this.showLoginModal=!1},doLogin(e){if(e==="login"){if(!this.username||!this.password){this.$root.postClientMessage("Benutzername und Passwort erforderlich.","danger");return}console.warn("Login with:",this.username,"/",this.password),this.$cookies.set("mqtt",`${this.username}:${this.password}`),this.$root.reconnectMqttClient(),this.$router.go()}console.warn("Closing login modal",e),this.showLoginModal=!1,this.username="",this.password=""},doLogout(e){this.showLogoutModal=!1,e==="confirm"&&(console.warn("Logging out user"),this.$cookies.remove("mqtt"),this.$root.reconnectMqttClient(),this.$router.go())}}},ri={id:"user-indicator"},di={key:0,class:"pill bg-primary"},ui={class:"non-selectable"},ci={title:"Abmelden"},pi={key:1,class:"pill bg-secondary"},mi={title:"Nicht angemeldet"},fi={title:"Anmelden"},gi={name:"loginForm"};function bi(e,t,s,r,a,n){const o=b("FontAwesomeIcon"),c=b("FontAwesomeLayers"),d=b("openwb-base-modal-dialog"),y=b("openwb-base-text-input");return i(),u(q,null,[n.userManagementActive===!0?(i(),_(R,{key:0,defer:"",to:"#infobar"},[l("div",ri,[n.loggedInUser?(i(),u("span",di,[f(o,{icon:["fas","circle-user"],size:"lg"}),l("span",ui,v(n.loggedInUser),1),l("span",ci,[f(o,{class:"text-light clickable px-2",icon:["fas","arrow-right-from-bracket"],size:"lg",onClick:t[0]||(t[0]=w=>a.showLogoutModal=!0)})])])):(i(),u("span",pi,[l("span",mi,[f(c,null,{default:m(()=>[f(o,{icon:["fas","circle-user"]}),f(o,{icon:["fas","ban"],color:"red"})]),_:1})]),l("span",fi,[f(o,{class:"text-light clickable px-2",icon:["fas","arrow-right-to-bracket"],size:"lg",onClick:t[1]||(t[1]=w=>a.showLoginModal=!0)})])]))])])):p("",!0),n.userManagementActive?(i(),_(d,{key:1,show:a.showLogoutModal,title:"Abmelden",subtype:"warning",buttons:[{text:"Abmelden",event:"confirm",subtype:"danger"}],onModalResult:t[2]||(t[2]=w=>n.doLogout(w))},{default:m(()=>[...t[6]||(t[6]=[l("p",null,"Willst Du Dich wirklich abmelden?",-1)])]),_:1},8,["show"])):p("",!0),n.userManagementActive?(i(),_(d,{key:2,show:a.showLoginModal,"prevent-close":!n.anonymousAccessAllowed,title:"Anmelden",subtype:"success",buttons:[{text:"Anmelden",event:"login",subtype:"success"}],onModalResult:t[5]||(t[5]=w=>n.doLogin(w))},{default:m(()=>[l("form",gi,[f(y,{modelValue:a.username,"onUpdate:modelValue":t[3]||(t[3]=w=>a.username=w),title:"Benutzername",subtype:"user",required:"",autocomplete:"username"},null,8,["modelValue"]),f(y,{modelValue:a.password,"onUpdate:modelValue":t[4]||(t[4]=w=>a.password=w),title:"Passwort",subtype:"password",required:"",autocomplete:"current-password"},null,8,["modelValue"])])]),_:1},8,["show","prevent-close"])):p("",!0)],64)}const hi=k(li,[["render",bi],["__scopeId","data-v-adc196c2"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageUser.vue"]]);O.add(et,tt);const _i={name:"OpenwbPageMessages",components:{FontAwesomeIcon:I,FontAwesomeLayers:te,FontAwesomeLayersText:st},mixins:[j],data(){return{mqttTopicsToSubscribe:["openWB/system/messages/+","openWB/command/"+this.$root.mqttClientId+"/messages/+"],showAllMessages:!1,hiddenMessages:[]}},computed:{alertLevel(){return this.messages.reduce((t,s)=>((t=="light"&&["info","success","warning","danger"].includes(s.type)||t=="info"&&["success","warning","danger"].includes(s.type)||t=="success"&&["warning","danger"].includes(s.type)||t=="warning"&&s.type=="danger")&&(t=s.type),t),"light")},messages(){const e=[];return this.systemMessages.forEach(t=>{e.push(t)}),this.localMessages.forEach(t=>{e.push(t)}),this.clientMessages.forEach(t=>{e.push(t)}),e.sort(this.compareMessagesByTimestamp),e},recentMessages(){return this.showAllMessages?this.messages:this.messages.filter(e=>!this.hiddenMessages.includes(e.topic))},messageIndicatorClass(){return"text-"+this.alertLevel},systemMessages(){let e=this.getWildcardTopics("openWB/system/messages/+");var t=[];for(const[s,r]of Object.entries(e))t.push({topic:s,...r});return t},localMessages(){const e=this.$store.state.local.messages||{};var t=[];for(const[s,r]of Object.entries(e))t.push({topic:s,...r});return t},clientMessages(){let e=this.getWildcardTopics("openWB/command/"+this.$root.mqttClientId+"/messages/+");var t=[];for(const[s,r]of Object.entries(e))t.push({topic:s,...r});return t}},methods:{toggleAllMessages(){this.showAllMessages=!this.showAllMessages},compareMessagesByTimestamp(e,t){return t.timestamp-e.timestamp},clearTopic(e){this.$root.doPublish(e,void 0)},dismissMessage(e){this.localMessages.find(s=>s.topic===e.topic)?this.$store.commit("removeClientMessage",e.topic):this.clearTopic(e.topic);var t=this.hiddenMessages.indexOf(e.topic);t>-1&&this.hiddenMessages.splice(t,1)},dismissAllMessages(){this.messages.forEach(e=>{this.dismissMessage({topic:e.topic})}),this.hiddenMessages=[],this.toggleAllMessages()},hideMessage(e){this.hiddenMessages.includes(e.topic)||this.hiddenMessages.push(e.topic)}}},yi=["innerHTML"];function vi(e,t,s,r,a,n){const o=b("font-awesome-icon"),c=b("font-awesome-layers-text"),d=b("font-awesome-layers"),y=b("openwb-base-alert"),w=b("openwb-base-click-button"),T=b("openwb-base-toast");return i(),u(q,null,[(i(),_(R,{defer:"",to:"nav"},[l("div",{id:"message-indicator",class:B(["text-light clickable",a.showAllMessages?"active":""]),onClick:t[0]||(t[0]=(...A)=>n.toggleAllMessages&&n.toggleAllMessages(...A))},[f(d,{"full-width":""},{default:m(()=>[f(o,{icon:a.showAllMessages?["fas","bell"]:["far","bell"],class:B(n.messageIndicatorClass)},null,8,["icon","class"]),n.messages.length>0?(i(),_(c,{key:0,counter:"",value:n.messages.length,position:"top-right",class:"message-counter bg-light text-dark"},null,8,["value"])):p("",!0)]),_:1})],2)])),n.recentMessages.length>0||a.showAllMessages?(i(),u("div",{key:0,class:B(["openwb-toast-container",a.showAllMessages?"full-height":""])},[n.recentMessages.length==0?(i(),_(y,{key:0,subtype:"info"},{default:m(()=>[...t[1]||(t[1]=[g(" Keine Nachrichten vorhanden. ",-1)])]),_:1})):a.showAllMessages?(i(),_(w,{key:1,class:"btn-sm btn-secondary mb-1",onButtonClicked:n.dismissAllMessages},{default:m(()=>[...t[2]||(t[2]=[g(" Alle Nachrichten löschen ",-1)])]),_:1},8,["onButtonClicked"])):p("",!0),(i(!0),u(q,null,V(n.recentMessages,A=>(i(),_(T,{key:A.topic,topic:A.topic,source:A.source,subtype:A.type,timestamp:A.timestamp,onDismiss:n.dismissMessage,onHide:n.hideMessage},{default:m(()=>[l("span",{innerHTML:A.message},null,8,yi)]),_:2},1032,["topic","source","subtype","timestamp","onDismiss","onHide"]))),128))],2)):p("",!0)],64)}const wi=k(_i,[["render",vi],["__scopeId","data-v-2c25f0d0"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageMessages.vue"]]),ki={name:"OpenwbPageBlocker",mixins:[j],data(){return{mqttTopicsToSubscribe:["openWB/system/boot_done","openWB/system/update_in_progress"]}},computed:{title(){return this.bootInProgress||this.updateInProgress?"openWB ist noch nicht bereit":this.reloadRequired?"Neues Laden der Seite erforderlich":"???"},myButtons(){return!(this.bootInProgress||this.updateInProgress)&&this.reloadRequired?[{text:"Jetzt neu laden",subtype:"success",event:"reload"}]:[]},bootInProgress(){return this.$store.state.mqtt["openWB/system/boot_done"]==null?!0:!this.$store.state.mqtt["openWB/system/boot_done"]},updateInProgress(){return this.$store.state.mqtt["openWB/system/update_in_progress"]==null?!1:this.$store.state.mqtt["openWB/system/update_in_progress"]},reloadRequired(){return this.$store.state.local.reloadRequired},showModalBlocker(){return this.bootInProgress||this.updateInProgress||this.reloadRequired}},methods:{handleModalResult(e){e=="reload"?location.reload():console.warn("unknown event",e)}}},Si={class:"openwb-blocker"},Bi={key:0},$i={key:1},Ci={key:2},Ai={key:3};function Oi(e,t,s,r,a,n){const o=b("openwb-base-modal-dialog");return i(),u("div",Si,[f(o,{show:n.showModalBlocker,title:n.title,subtype:"dark","prevent-close":!0,buttons:n.myButtons,onModalResult:t[0]||(t[0]=c=>n.handleModalResult(c))},{default:m(()=>[n.bootInProgress?(i(),u("p",Bi,"Der Systemstart ist noch nicht abgeschlossen.")):p("",!0),n.updateInProgress?(i(),u("p",$i,"Es wird eine Systemaktualisierung ausgeführt.")):p("",!0),!(n.bootInProgress||n.updateInProgress)&&n.reloadRequired?(i(),u("p",Ci,"Bitte die Seite neu laden.")):(i(),u("p",Ai,"Bitte warten..."))]),_:1},8,["show","title","buttons"])])}const Ii=k(ki,[["render",Oi],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageBlocker.vue"]]),qi={name:"OpenwbSettingsApp",components:{NavBar:ti,PageFooter:ai,UserInfo:hi,Messages:wi,Blocker:Ii},data(){return{client:{connected:!1},connection:{protocol:location.protocol=="https:"?"wss":"ws",protocolVersion:5,host:location.hostname,port:parseInt(location.port)||(location.protocol=="https:"?443:80),path:"/ws",connectTimeout:4e3,reconnectPeriod:4e3,resubscribe:!0,properties:{requestResponseInformation:!0,requestProblemInformation:!0}}}},computed:{mqttClientId(){try{return this.client.options.clientId}catch(e){console.error("mqttClientId error",e);return}},topicList(){return Object.keys(this.$store.state.mqtt)},nodeEnv(){return"development"}},created(){this.createConnection()},methods:{async saveValues(e=void 0){function t(r){return new Promise(a=>setTimeout(a,r))}this.$store.state.local.savingData=!0;let s={};e===void 0?(console.debug("no topics defined, so save everything we have in store"),s=this.$store.state.mqtt):Array.isArray(e)?e.forEach(r=>{console.debug("adding topic to save:",r),s[r]=this.$store.state.mqtt[r]}):console.error("expected array, got ",typeof e);for(const[r,a]of Object.entries(s)){if(r.startsWith("$CONTROL")){console.debug("skipping control topic:",r);continue}let n=r.replace("openWB/","openWB/set/");console.debug("saving data:",n,a),this.doPublish(n,a),await t(100)}this.$store.state.local.savingData=!1},resetValues(e=this.topicList){console.debug("resetting values..."),console.debug("topics: ",e),this.doUnsubscribe(e),this.doSubscribe(e)},setDefaultValues(){console.debug("setting default values... (ToDo)")},sendCommand(e){console.debug("sendCommand:",e),this.doPublish(`openWB/set/command/${this.client.options.clientId}/todo/${e.command}`,e,!1)},createConnection(){const{protocol:e,host:t,port:s,path:r,...a}=this.connection,n=`${e}://${t}:${s}${r}`,[o,c]=this.$cookies.get("mqtt")?.split(":")||[null,null];o&&c||console.debug("Anonymous mqtt connection (no cookie set)"),(this.nodeEnv!=="production"||e=="wss")&&o&&c&&(console.debug("Using mqtt credentials from cookie:",o,"/",c),a.username=o,a.password=c,o==="admin"&&c==="openwb"&&(console.warn("Using default mqtt credentials! This is insecure and not recommended for production systems."),this.postClientMessage("Warnung: Es werden die Standard-Zugangsdaten für MQTT verwendet! Dies ist unsicher und wird für Produktivsysteme nicht empfohlen.","warning"))),console.debug("connecting to broker:",n),this.client=me.connect(n,a),this.client.on("connect",()=>{console.debug("Connection succeeded! ClientId: ",this.client.options.clientId),o&&(this.postClientMessage(`Angemeldet als "${o}".`,"success"),this.$store.commit("storeLocal",{name:"username",value:o})),this.doSubscribe(["openWB/system/usage_terms_acknowledged","openWB/system/installAssistantDone","openWB/system/security/settings_accessible","openWB/system/security/status_accessible","openWB/system/security/charge_log_accessible","openWB/system/security/chart_accessible"])}),this.client.on("error",d=>{console.error("Connection failed",d),this.postClientMessage("Verbindungsfehler:<br />"+d.message,"danger"),this.$cookies.remove("mqtt"),this.$store.commit("storeLocal",{name:"username",value:null}),this.client.end(),this.createConnection()}),this.client.on("message",(d,y)=>{if(y.toString().length>0){let w;try{w=JSON.parse(y.toString())}catch(T){console.debug("Json parsing failed, fallback to string: ",d,T),w=y.toString()}this.$store.commit("updateTopic",{topic:d,payload:w})}else this.$store.commit("removeTopic",d)})},endConnection(){this.client?.connected?(console.warn("Ending mqtt connection..."),this.client.end(),this.$store.commit("storeLocal",{name:"username",value:null})):console.error("No mqtt connection to end.")},reconnectMqttClient(){this.client?.connected&&this.endConnection(),this.createConnection()},doSubscribe(e){e.forEach(t=>{this.$store.commit("addSubscription",t),this.$store.getters.subscriptionCount(t)==1?(t.includes("#")||t.includes("+")?console.debug("skipping init of wildcard topic:",t):this.$store.commit("addTopic",{topic:t,payload:void 0}),this.client.subscribe(t,{},s=>{if(s){this.postClientMessage(`Daten konnten nicht abonniert werden.<br />Topic: ${t}<br />${s}`,"danger");return}})):console.debug("Already subscribed to topic: ",t)})},doUnsubscribe(e){e.forEach(t=>{this.$store.commit("removeSubscription",t),this.$store.getters.subscriptionCount(t)==0?(this.client.unsubscribe(t,s=>{s&&(console.error("Unsubscribe error",s),this.postClientMessage(`Daten konnten nicht abbestellt werden.<br />Topic: ${t}<br />${s}`,"danger"))}),t.includes("#")||t.includes("+")?(console.debug("expanding wildcard topic:",t),Object.keys(this.getWildcardTopics(t)).forEach(s=>{console.debug("removing wildcardTopic:",s),this.$store.commit("removeTopic",s)})):(console.debug("removing topic:",t),this.$store.commit("removeTopic",t))):console.debug("Still subscribed to topic: ",t)})},doPublish(e,t,s=!0,r=2){let a={qos:r,retain:s};this.client.publish(e,JSON.stringify(t),a,n=>{n&&(console.error("Publish error",n),this.postClientMessage(`Daten konnten nicht geschrieben werden.<br />Topic: ${e}<br />${n}`,"danger"))})},postClientMessage(e,t="secondary"){console.debug("postMessage:",e,t);const s=Date.now();this.$store.commit({type:"addClientMessage",timestamp:s,payload:{message:e,type:t,source:"client",timestamp:Math.floor(s/1e3)}})},getWildcardTopics(e,t=!1){let s=e;return t||(s="^"+e.replaceAll("/","\\/").replaceAll("+","[^+/]+").replaceAll("#","[^#/]+")+"$"),Object.keys(this.$store.state.mqtt).filter(r=>r.match(s)).reduce((r,a)=>({...r,[a]:this.$store.state.mqtt[a]}),{})}}},Ti={role:"main",class:"container"},Mi={id:"content"};function Vi(e,t,s,r,a,n){const o=b("nav-bar"),c=b("router-view"),d=b("page-footer"),y=b("user-info"),w=b("messages"),T=b("blocker");return i(),u(q,null,[l("header",null,[f(o)]),l("div",Ti,[l("div",Mi,[l("h1",null,v(e.$route.meta.heading),1),f(c,{onSave:n.saveValues,onReset:n.resetValues,onDefaults:n.setDefaultValues,onSendCommand:n.sendCommand},null,8,["onSave","onReset","onDefaults","onSendCommand"])])]),f(d),f(y),f(w),f(T)],64)}const Pi=k(qi,[["render",Vi],["__file","/opt/openWB-dev/openwb-ui-settings/src/App.vue"]]),Li="modulepreload",Di=function(e){return"/openWB/web/settings/"+e},J={},S=function(t,s,r){let a=Promise.resolve();if(s&&s.length>0){let d=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");a=d(s.map(y=>{if(y=Di(y),y in J)return;J[y]=!0;const w=y.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${T}`))return;const A=document.createElement("link");if(A.rel=w?"stylesheet":Li,w||(A.as="script"),A.crossOrigin="",A.href=y,c&&A.setAttribute("nonce",c),document.head.appendChild(A),w)return new Promise((ae,le)=>{A.addEventListener("load",ae),A.addEventListener("error",()=>le(new Error(`Unable to preload CSS for ${y}`)))})}))}function n(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return a.then(o=>{for(const c of o||[])c.status==="rejected"&&n(c.reason);return t().catch(n)})},Wi={namespaced:!0,state:()=>({hiddenDatasets:[]}),mutations:{toggleDataset(e,t){e.hiddenDatasets.includes(t)?e.hiddenDatasets=e.hiddenDatasets.filter(s=>s!==t):e.hiddenDatasets.push(t)},setHiddenDatasets(e,t){e.hiddenDatasets=t}}};let oe={mqtt:{},mqttSubscriptions:{},local:{reloadRequired:!1,savingData:!1,username:null}};oe.examples={text1:"Text...",text2:"mail@domain.com",text3:"openwb.local",text4:"http://www.openwb.de",text5:"Benutzername",text6:"12:34",text7:"2021-10-31",text8:"Text mit Add-Button",color1:"#ff0000",color2:"#0000ff",number1:5,number2:10,number3:28e-5,password1:"GeHeiM!",textarea1:"Langer Text...",range1:6,range2:10,select1:1,select2:void 0,buttonGroup1:1,checkbox1:!0,json1:{text:"Text",number:123},hierarchy1:[{id:0,type:"counter",children:[{id:3,type:"inverter",children:[]},{id:4,type:"bat",children:[]},{id:1,type:"cp",children:[]},{id:2,type:"cp",children:[]}]}],hierarchy1Labels:{0:"EVU",1:"Ladepunkt 1",2:"Ladepunkt 2",3:"Wechselrichter",4:"Batteriespeicher"},tags:["1234","2345","3456"],ioConfig:{active:!1,pattern:[null,!1,!0],action:{value:"stop_all",options:null}}};const E=fe({state:oe,mutations:{storeLocal(e,t){e.local[t.name]=t.value},addTopic(e,t){Object.keys(e.mqtt).includes(t.topic)?console.warn("topic already exists: ",t.topic):e.mqtt[t.topic]=t.payload},removeTopic(e,t){delete e.mqtt[t]},updateTopic(e,t){const s=(r,a,n)=>a.split(".").reduce((o,c,d)=>o[c]=a.split(".").length===++d?n:o[c]||{},r);t.topic in e.mqtt||!(t.topic in e.examples)?t.objectPath!=null?s(e.mqtt[t.topic],t.objectPath,t.payload):e.mqtt[t.topic]=t.payload:(console.debug("topic not found in state.mqtt: ",t.topic),t.topic in e.examples?t.objectPath!=null?s(e.examples[t.topic],t.objectPath,t.payload):e.examples[t.topic]=t.payload:console.warn("topic not found in state: ",t.topic," giving up"))},addClientMessage(e,t){e.local.messages||(e.local.messages={}),e.local.messages[t.timestamp]=t.payload},removeClientMessage(e,t){e.local.messages&&t in e.local.messages&&delete e.local.messages[t]},addSubscription(e,t){t in e.mqttSubscriptions?e.mqttSubscriptions[t]+=1:e.mqttSubscriptions[t]=1,console.debug("subscription count: ",t,e.mqttSubscriptions[t])},removeSubscription(e,t){t in e.mqttSubscriptions&&(e.mqttSubscriptions[t]-=1,e.mqttSubscriptions[t]<=0&&delete e.mqttSubscriptions[t])}},actions:{},modules:{chartLegend:Wi},getters:{usageTermsAcknowledged(e){return new Promise(t=>{if(e.mqtt["openWB/system/usage_terms_acknowledged"]!==void 0)t(e.mqtt["openWB/system/usage_terms_acknowledged"]);else{var s,r;s=setTimeout(()=>{clearInterval(r),t(!1)},5e3),r=setInterval(()=>{e.mqtt["openWB/system/usage_terms_acknowledged"]!==void 0&&(clearTimeout(s),clearInterval(r),t(e.mqtt["openWB/system/usage_terms_acknowledged"]))},100)}})},installAssistantDone(e){return new Promise(t=>{if(e.mqtt["openWB/system/installAssistantDone"]!==void 0)t(e.mqtt["openWB/system/installAssistantDone"]);else{var s,r;s=setTimeout(()=>{clearInterval(r),t(!1)},5e3),r=setInterval(()=>{e.mqtt["openWB/system/installAssistantDone"]!==void 0&&(clearTimeout(s),clearInterval(r),t(e.mqtt["openWB/system/installAssistantDone"]))},100)}})},statusAccessible(e){return new Promise(t=>{if(e.mqtt["openWB/system/security/status_accessible"]!==void 0)t(e.mqtt["openWB/system/security/status_accessible"]);else{var s,r;s=setTimeout(()=>{clearInterval(r),t(!1)},5e3),r=setInterval(()=>{e.mqtt["openWB/system/security/status_accessible"]!==void 0&&(clearTimeout(s),clearInterval(r),t(e.mqtt["openWB/system/security/status_accessible"]))},100)}})},chargeLogAccessible(e){return new Promise(t=>{if(e.mqtt["openWB/system/security/charge_log_accessible"]!==void 0)t(e.mqtt["openWB/system/security/charge_log_accessible"]);else{var s,r;s=setTimeout(()=>{clearInterval(r),t(!1)},5e3),r=setInterval(()=>{e.mqtt["openWB/system/security/charge_log_accessible"]!==void 0&&(clearTimeout(s),clearInterval(r),t(e.mqtt["openWB/system/security/charge_log_accessible"]))},100)}})},chartAccessible(e){return new Promise(t=>{if(e.mqtt["openWB/system/security/chart_accessible"]!==void 0)t(e.mqtt["openWB/system/security/chart_accessible"]);else{var s,r;s=setTimeout(()=>{clearInterval(r),t(!1)},5e3),r=setInterval(()=>{e.mqtt["openWB/system/security/chart_accessible"]!==void 0&&(clearTimeout(s),clearInterval(r),t(e.mqtt["openWB/system/security/chart_accessible"]))},100)}})},settingsAccessible(e){return new Promise(t=>{if(e.mqtt["openWB/system/security/settings_accessible"]!==void 0)t(e.mqtt["openWB/system/security/settings_accessible"]);else{var s,r;s=setTimeout(()=>{clearInterval(r),t(!1)},5e3),r=setInterval(()=>{e.mqtt["openWB/system/security/settings_accessible"]!==void 0&&(clearTimeout(s),clearInterval(r),t(e.mqtt["openWB/system/security/settings_accessible"]))},100)}})},subscriptionCount:e=>t=>e.mqttSubscriptions[t]||0}}),ie=[{path:"/",redirect:"/GeneralConfig"},{path:"/Status",name:"Status",meta:{heading:"Status",requiredPermission:"statusAccessible"},component:()=>S(()=>import("./Status-RLXlbY4S.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))},{path:"/Logging/ChargeLog",name:"ChargeLog",meta:{heading:"Auswertungen - Ladeprotokoll",requiredPermission:"chargeLogAccessible"},component:()=>S(()=>import("./ChargeLog-DZTiEjxd.js"),__vite__mapDeps([12,1,2,3,4,7,8,9,10,13]))},{path:"/Logging/Chart/:chartRange?/:initialDate?",name:"Chart",meta:{heading:"Auswertungen - Diagramme",requiredPermission:"chartAccessible"},component:()=>S(()=>import("./Chart-Cor0COEL.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9,10,15]))},{path:"/GeneralConfig",name:"GeneralConfig",meta:{heading:"Einstellungen - Allgemein",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./GeneralConfig-C_uZYo9m.js").then(e=>e.a),__vite__mapDeps([16,1,2,3,4,17]))},{path:"/IdentificationConfig",name:"IdentificationConfig",meta:{heading:"Einstellungen - Identifikation",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./IdentificationConfig-CRY-eecE.js"),__vite__mapDeps([18,2,3,4,1,7,8,9,10]))},{path:"/OptionalComponents",name:"OptionalComponents",meta:{heading:"Einstellungen - Display",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./OptionalComponents-Comn3EMe.js").then(e=>e.O),__vite__mapDeps([19,17,1,2,3,4]))},{path:"/GeneralChargeConfig",name:"GeneralChargeConfig",meta:{heading:"Ladeeinstellungen - Übergreifendes",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./GeneralChargeConfig-DmQ4Q1Px.js").then(e=>e.a),__vite__mapDeps([20,17,1,2,3,4]))},{path:"/SurplusChargeConfig",name:"SurplusChargeConfig",meta:{heading:"Ladeeinstellungen - Überschuss-Laden",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./SurplusChargeConfig-D4EHzeXB.js"),__vite__mapDeps([21,1,2,3,4,7,8,9,10]))},{path:"/ActiveBatControl",name:"ActiveBatControl",meta:{heading:"Ladeeinstellungen - Speichersteuerung",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./ActiveBatControl-yhYfcBe5.js"),__vite__mapDeps([22,1,2,3,4,7,8,9,10]))},{path:"/HardwareInstallation",name:"HardwareInstallation",meta:{heading:"Konfiguration - Geräte und Komponenten",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./HardwareInstallation-DGLetmVy.js").then(e=>e.a),__vite__mapDeps([23,1,2,3,4,17]))},{path:"/LoadManagementConfiguration",name:"LoadManagementConfiguration",meta:{heading:"Konfiguration - Lastmanagement",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./LoadManagementConfig-DEDVWf4c.js"),__vite__mapDeps([24,1,2,3,4,25,26,7,8,9,10]))},{path:"/ChargePointInstallation",name:"ChargePointInstallation",meta:{heading:"Konfiguration - Ladepunkte",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./ChargePointInstallation-CDVi8d9y.js").then(e=>e.c),__vite__mapDeps([27,1,2,3,4,17,28]))},{path:"/VehicleConfiguration/:section?/:section_index?/:section_part?/:action?",name:"VehicleConfiguration",meta:{heading:"Konfiguration - Fahrzeuge",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./VehicleConfig-BwxIP6PO.js").then(e=>e.b),__vite__mapDeps([29,1,2,3,4,17]))},{path:"/IoConfiguration",name:"IoConfiguration",meta:{heading:"Konfiguration - Ein- und Ausgänge",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./IoConfig-DDb8esn8.js").then(e=>e.b),__vite__mapDeps([30,1,2,3,4,17]))},{path:"/System/CloudConfiguration",name:"CloudConfig",meta:{heading:"System - openWB Cloud",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./CloudConfig-aBRgK24K.js"),__vite__mapDeps([31,1,2,3,4,7,8,9,10]))},{path:"/System/MqttBridgeConfiguration",name:"MqttBridgeConfig",meta:{heading:"System - MQTT-Brücken",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./MqttBridgeConfig-DtFIgefu.js"),__vite__mapDeps([32,1,2,3,4,7,8,9,10]))},{path:"/System/DebugConfiguration",name:"Debugging",meta:{heading:"System - Fehlersuche",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./DebugConfig-D9EzpEC6.js"),__vite__mapDeps([33,1,2,3,4,10,7,8,9,34]))},{path:"/System/Support",name:"Support",meta:{heading:"System - Support",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./Support-B8LhoRnz.js"),__vite__mapDeps([35,1,2,3,4,7,8,9,10]))},{path:"/System/LegalSettings",name:"LegalSettings",meta:{heading:"System - Rechtliches",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./LegalSettings-eZ18R0ET.js"),__vite__mapDeps([36,1,2,3,4,7,8,9,10]))},{path:"/System/SystemConfiguration",name:"SystemConfig",meta:{heading:"System - System",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./System-BGGybnlW.js"),__vite__mapDeps([37,1,2,3,4,7,8,9,10,38]))},{path:"/System/SecurityConfiguration",name:"SecurityConfig",meta:{heading:"System - Sicherheit",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./Security-Cw6LJ0x9.js"),__vite__mapDeps([39,1,2,3,4,7,8,9,10]))},{path:"/System/DataManagement",name:"DataManagement",meta:{heading:"System - Datenverwaltung",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./DataManagement-C2ar1dpw.js").then(e=>e.a),__vite__mapDeps([40,1,2,3,4,17]))},{path:"/System/InstallAssistant",name:"InstallAssistant",meta:{heading:"System - Einrichtungsassistent",requiredPermission:"settingsAccessible"},component:()=>S(()=>import("./InstallAssistant-nDgvRIWP.js"),__vite__mapDeps([41,17,2,3,4,1,7,8,9,10]))},{path:"/Error",name:"Error",meta:{heading:"Fehler"},component:()=>S(()=>import("./Error-D0Qw_Svu.js"),__vite__mapDeps([42,2,3,4]))}];ie.push({path:"/TestingStore",name:"VUEX Store",meta:{heading:"Beispiele - VUEX Store"},component:()=>S(()=>import("./TestingStore-DaVoKHng.js"),__vite__mapDeps([43,25,2,3,4,1,26,7,8,9,10]))});const U=ge({history:be(),routes:ie});U.beforeEach(async e=>{if(await E.getters.usageTermsAcknowledged){if(!await E.getters.installAssistantDone&&e.name!=="InstallAssistant")return{name:"InstallAssistant"}}else if(e.name!=="LegalSettings")return{name:"LegalSettings"};if(e.meta.requiredPermission&&!await E.getters[e.meta.requiredPermission])return console.warn("no permission to access",e.name),E.state.local.username?{name:"Error"}:(console.debug("not logged in, cancel navigation to",e.name),!1)});U.afterEach(e=>{e.meta.heading?document.title="openWB | "+e.meta.heading:document.title="openWB"});const F=he(Pi);F.use(E).use(U).use(nt,ot).use(_e,{expire:"30d",path:"/",domain:"",secure:!0,sameSite:"Lax"});const Ei=Object.assign({"./components/OpenwbBaseAlert.vue":rt,"./components/OpenwbBaseArrayInput.vue":qt,"./components/OpenwbBaseAvatar.vue":Lt,"./components/OpenwbBaseButtonGroupInput.vue":Ht,"./components/OpenwbBaseButtonInput.vue":es,"./components/OpenwbBaseButtonRow.vue":Rt,"./components/OpenwbBaseCard.vue":us,"./components/OpenwbBaseCheckboxInput.vue":bs,"./components/OpenwbBaseClickButton.vue":Zt,"./components/OpenwbBaseColorPicker.vue":ks,"./components/OpenwbBaseCopyToClipboard.vue":Ts,"./components/OpenwbBaseHeading.vue":xs,"./components/OpenwbBaseIoPattern.vue":zs,"./components/OpenwbBaseModalDialog.vue":Qs,"./components/OpenwbBaseNumberInput.vue":un,"./components/OpenwbBaseRangeInput.vue":vn,"./components/OpenwbBaseSelectInput.vue":Pn,"./components/OpenwbBaseSettingElement.vue":ft,"./components/OpenwbBaseSubmitButtons.vue":Fn,"./components/OpenwbBaseTextInput.vue":go,"./components/OpenwbBaseTextarea.vue":Oo,"./components/OpenwbBaseToast.vue":Po});Object.entries(Ei).forEach(([e,t])=>{const s=ye(ve(e.split("/").pop().replace(/\.\w+$/,"")));F.component(s,t.default)});F.mount("#app");export{j as C,L as O,S as _};
