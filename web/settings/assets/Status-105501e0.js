import{C as y}from"./index-e15d6daf.js";import{l as w,K as q,L as P,c as S,F as T,M as A,N as D,O as G,P as H,Q as Z,R as F,S as K,T as J,U,V as I,W as L,X as Q,Y as X,Z as Y}from"./vendor-fortawesome-ef568383.js";import{_ as v,u as i,l as d,z as h,D as j,E as r,x as e,m as f,G as n,y as u,F as a,B as W,p as $,N as C,M as N}from"./vendor-50cefa3f.js";import{C as ee,p as te,a as se,L as oe,b as ae,P as re,c as ie,T as ne,i as ce,d as de,e as le}from"./vendor-chartjs-b2446eec.js";import"./vendor-bootstrap-64b273d7.js";import"./vendor-jquery-dcdc1577.js";import"./vendor-axios-e5948c87.js";import"./vendor-sortablejs-9ec91509.js";import"./vendor-luxon-8ddd27a0.js";w.add(q,P,S);const pe={name:"StatusCard",components:{FontAwesomeIcon:T},props:{subtype:{type:String,required:!0},state:{type:Number,required:!1,default:0},stateMessage:{type:String,required:!1,default:void 0},componentId:{type:Number,required:!1,default:void 0}},computed:{stateClass(){switch(this.state){case 0:return"success";case 1:return"warning";case 2:return"danger";default:return"dark"}},stateIcon(){switch(this.state){case 0:return["fas","check-circle"];case 1:return["fas","exclamation-triangle"];case 2:return["fas","times-circle"];default:return["fas","check-circle"]}}}},me={class:"text-right"},ue={class:"container"},ge={class:"row justify-content-end"},he={key:0,class:"col px-0"},_e={style:{"white-space":"pre-wrap"}},be={key:1,class:"col col-auto pr-0"},fe={class:"text-right"};function ve(s,o,c,g,_,t){const p=i("font-awesome-icon"),l=i("openwb-base-alert"),m=i("openwb-base-card");return d(),h(m,{subtype:c.subtype,collapsible:!0,collapsed:!0,class:"pb-0"},j({header:r(()=>[$(s.$slots,"header-left")]),actions:r(()=>[e("div",me,[$(s.$slots,"header-right")]),n(p,{class:"ml-1","fixed-width":"",icon:t.stateIcon},null,8,["icon"])]),default:r(()=>[$(s.$slots,"default")]),_:2},[c.componentId!==void 0||c.stateMessage?{name:"footer",fn:r(()=>[e("div",ue,[e("div",ge,[c.stateMessage?(d(),f("div",he,[n(l,{subtype:t.stateClass},{default:r(()=>[n(p,{"fixed-width":"",icon:t.stateIcon},null,8,["icon"]),o[0]||(o[0]=u(" Modulmeldung: ")),e("span",_e,a(c.stateMessage),1)]),_:1},8,["subtype"])])):W("",!0),c.componentId!==void 0?(d(),f("div",be,[e("div",fe,"ID: "+a(c.componentId),1)])):W("",!0)])])]),key:"0"}:void 0]),1032,["subtype"])}const x=v(pe,[["render",ve],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/StatusCard.vue"]]);w.add(A);const ye={name:"ChargePointSumCard",components:{StatusCard:x,FontAwesomeIcon:T},mixins:[y],computed:{baseTopic:{get(){return"openWB/chargepoint"}}}},we={class:"text-right"},Te={class:"row"},xe={class:"col text-right text-monospace"},We={class:"row"},ke={class:"col-4 text-right text-monospace"},Be={class:"col-4 text-right text-monospace"},Ce={class:"row"},Ne={class:"col-4 text-right text-monospace"},$e={class:"col-4 text-right text-monospace"};function qe(s,o,c,g,_,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),h(m,{subtype:"primary"},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","charging-station"]}),o[0]||(o[0]=u(" Alle Ladepunkte "))]),"header-right":r(()=>[e("span",we,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1)]),default:r(()=>[n(l,{subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[1]||(o[1]=e("div",{class:"row py-2"},[e("div",{class:"col font-weight-bold"},"Ladevorgang"),e("div",{class:"col text-right"},"Leistung")],-1)),e("div",Te,[e("div",xe,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001)),1)])]),_:1}),n(l,{subtype:"white","body-bg":"white",class:"py-1 mb-2",title:"Zählerstände"},{default:r(()=>[o[4]||(o[4]=e("div",{class:"row justify-content-end"},[e("div",{class:"col-4 text-right"},"Geladen"),e("div",{class:"col-4 text-right"},"Entladen")],-1)),e("div",We,[o[2]||(o[2]=e("div",{class:"col text-right"},"Heute",-1)),e("div",ke,a(s.formatNumberTopic(t.baseTopic+"/get/daily_imported",3,3,.001)+" kWh"),1),e("div",Be,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001)+" kWh"),1)]),e("div",Ce,[o[3]||(o[3]=e("div",{class:"col text-right"},"Gesamt",-1)),e("div",Ne,a(s.formatNumberTopic(t.baseTopic+"/get/imported",3,3,.001)+" kWh"),1),e("div",$e,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001)+" kWh"),1)])]),_:1})]),_:1})}const Pe=v(ye,[["render",qe],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/ChargePointSumCard.vue"]]);w.add(A,D,G,H,Z,F,K,J);const Se={name:"ChargePointCard",components:{StatusCard:x,FontAwesomeIcon:T},mixins:[y],props:{installedChargePointKey:{type:String,required:!0},installedChargePoint:{type:Object,required:!0}},computed:{chargePointIndex:{get(){return parseInt(this.installedChargePointKey.match(/(?:\/)(\d+)(?=\/)/)[1])}},baseTopic:{get(){return"openWB/chargepoint/"+this.chargePointIndex}},chargingStatus:{get(){let s=this.chargePointIndex,o=this.$store.state.mqtt["openWB/chargepoint/"+s+"/get/plug_state"],c=this.$store.state.mqtt["openWB/chargepoint/"+s+"/get/charge_state"];return o==1&&c==1?{icon:["fas","plug-circle-bolt"],text:"Fahrzeug angesteckt, Ladevorgang aktiv"}:o==1?{icon:["fas","plug-circle-check"],text:"Fahrzeug angesteckt, kein Ladevorgang aktiv"}:{icon:["fas","plug-circle-minus"],text:"Kein Fahrzeug angesteckt"}}}}},Ae={class:"row py-2"},Ie={class:"col text-right"},Le={style:{"white-space":"pre-wrap"}},je={class:"row"},Oe={class:"col text-right text-monospace"},ze={class:"col text-right text-monospace"},Ee={class:"row"},Re={key:0,class:"col text-right text-monospace"},Ve={key:1,class:"col text-right text-monospace"},Me={class:"col text-right text-monospace"},De={class:"row"},Ge={class:"col-4 text-right text-monospace"},He={class:"col-4 text-right text-monospace"},Ze={class:"row"},Fe={class:"col-4 text-right text-monospace"},Ke={class:"col-4 text-right text-monospace"},Je={class:"row"},Ue={class:"col text-right text-monospace"},Qe={class:"col text-right text-monospace"},Xe={class:"col text-right text-monospace"},Ye={class:"row"},et={class:"col text-right text-monospace"},tt={class:"col text-right text-monospace"},st={class:"col text-right text-monospace"},ot={class:"row"},at={class:"col text-right text-monospace"},rt={class:"col text-right text-monospace"},it={class:"col text-right text-monospace"},nt={class:"row"},ct={class:"col text-right text-monospace"},dt={class:"col text-right text-monospace"},lt={class:"col text-right text-monospace"},pt={class:"row"},mt={class:"col text-center text-monospace"};function ut(s,o,c,g,_,t){const p=i("font-awesome-icon"),l=i("openwb-base-alert"),m=i("openwb-base-card"),k=i("status-card");return d(),h(k,{subtype:"primary","component-id":t.chargePointIndex,state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","charging-station"]}),u(" "+a(c.installedChargePoint.name),1)]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW",1)]),default:r(()=>[n(m,{subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[e("div",Ae,[o[0]||(o[0]=e("div",{class:"col col-auto font-weight-bold"},"Status",-1)),e("div",Ie,[n(p,{"fixed-width":"",icon:t.chargingStatus.icon,title:t.chargingStatus.text},null,8,["icon","title"]),u(" "+a(t.chargingStatus.text),1)])]),n(l,{subtype:"info"},{default:r(()=>[o[1]||(o[1]=u(" Statusmeldung: ")),e("span",Le,a(s.$store.state.mqtt[t.baseTopic+"/get/state_str"]),1)]),_:1}),e("div",null," max. Ladeleistung: "+a((s.max_power=s.formatNumberTopic("openWB/chargepoint/"+t.chargePointIndex+"/get/max_evse_current",0))=="-"?s.max_power:Math.floor(s.max_power*3*230/1e3))+" kW ",1)]),_:1}),n(m,{subtype:"white","body-bg":"white",class:"py-1 mb-2",title:"Ladevorgang"},{default:r(()=>[o[2]||(o[2]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Ladestrom Vorgabe"),e("div",{class:"col text-right"},"Leistung")],-1)),e("div",je,[e("div",Oe,a(s.formatNumberTopic(t.baseTopic+"/set/current",2))+" A",1),e("div",ze,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1)]),o[3]||(o[3]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Phasen Vorgabe"),e("div",{class:"col text-right"},"Phasen Aktuell")],-1)),e("div",Ee,[s.$store.state.mqtt["openWB/general/extern"]===!0?(d(),f("div",Re,a(s.formatNumberTopic("openWB/internal_chargepoint/"+t.chargePointIndex+"/data/phases_to_use")),1)):(d(),f("div",Ve,a(s.formatNumberTopic(t.baseTopic+"/set/phases_to_use")),1)),e("div",Me,a(s.formatNumberTopic(t.baseTopic+"/get/phases_in_use")),1)])]),_:1}),n(m,{subtype:"white","body-bg":"white",class:"py-1 mb-2",title:"Zählerstände"},{default:r(()=>[o[6]||(o[6]=e("div",{class:"row justify-content-end"},[e("div",{class:"col-4 text-right"},"Geladen"),e("div",{class:"col-4 text-right"},"Entladen")],-1)),e("div",De,[o[4]||(o[4]=e("div",{class:"col text-right"},"Heute",-1)),e("div",Ge,a(s.formatNumberTopic(t.baseTopic+"/get/daily_imported",3,3,.001))+" kWh ",1),e("div",He,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001))+" kWh ",1)]),e("div",Ze,[o[5]||(o[5]=e("div",{class:"col text-right"},"Gesamt",-1)),e("div",Fe,a(s.formatNumberTopic(t.baseTopic+"/get/imported",3,3,.001))+" kWh ",1),e("div",Ke,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001))+" kWh ",1)])]),_:1}),n(m,{subtype:"white","body-bg":"white",class:"py-1 mb-2",title:"Werte pro Phase"},{default:r(()=>[e("div",Je,[o[7]||(o[7]=e("div",{class:"col-md-4 pr-1 text-center text-md-right"},"Spannung [V]",-1)),e("div",Ue,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[0]),1),e("div",Qe,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[1]),1),e("div",Xe,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[2]),1)]),e("div",Ye,[o[8]||(o[8]=e("div",{class:"col-md-4 pr-1 text-center text-md-right"},"Strom [A]",-1)),e("div",et,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[0]),1),e("div",tt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[1]),1),e("div",st,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[2]),1)]),e("div",ot,[o[9]||(o[9]=e("div",{class:"col-md-4 pr-1 text-center text-md-right"},"Wirkleistung [kW]",-1)),e("div",at,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[0]),1),e("div",rt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[1]),1),e("div",it,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[2]),1)]),e("div",nt,[o[10]||(o[10]=e("div",{class:"col-md-4 pr-1 text-center text-md-right"},"Leistungsfaktor",-1)),e("div",ct,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[0]),1),e("div",dt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[1]),1),e("div",lt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[2]),1)]),e("div",pt,[o[11]||(o[11]=e("div",{class:"col-md-4 pr-1 text-center text-md-right"},"Netzfrequenz",-1)),e("div",mt,a(s.formatNumberTopic(t.baseTopic+"/get/frequency",3))+" Hz ",1)])]),_:1})]),_:1},8,["component-id","state","state-message"])}const gt=v(Se,[["render",ut],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/ChargePointCard.vue"]]);w.add(U);const ht={name:"CounterCard",components:{StatusCard:x,FontAwesomeIcon:T},mixins:[y],props:{counter:{type:Object,required:!0}},computed:{baseTopic:{get(){return"openWB/counter/"+this.counter.id}}}},_t={class:"row"},bt={class:"col text-right text-monospace pl-0"},ft={class:"col text-right text-monospace pl-0"},vt={class:"row"},yt={class:"col text-right text-monospace pl-0"},wt={class:"col text-right text-monospace pl-0"},Tt={class:"row"},xt={class:"col"},Wt={class:"row"},kt={class:"col text-right text-monospace pl-0"},Bt={class:"col text-right text-monospace pl-0"},Ct={class:"col text-right text-monospace pl-0"},Nt={class:"row"},$t={class:"col"},qt={class:"row"},Pt={class:"col text-right text-monospace pl-0"},St={class:"col text-right text-monospace pl-0"},At={class:"col text-right text-monospace pl-0"},It={class:"row"},Lt={class:"col"},jt={class:"row"},Ot={class:"col text-right text-monospace pl-0"},zt={class:"col text-right text-monospace pl-0"},Et={class:"col text-right text-monospace pl-0"},Rt={class:"row"},Vt={class:"col"},Mt={class:"row"},Dt={class:"col text-right text-monospace pl-0"},Gt={class:"col text-right text-monospace pl-0"},Ht={class:"col text-right text-monospace pl-0"};function Zt(s,o,c,g,_,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),h(m,{subtype:"danger","component-id":c.counter.id,state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","gauge-high"]}),u(" "+a(c.counter.name),1)]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW",1)]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[0]||(o[0]=e("div",{class:"row"},[e("div",{class:"col-6 text-right"},"Leistung"),e("div",{class:"col-6 text-right"},"Netzfrequenz")],-1)),e("div",_t,[e("div",bt,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001)+" kW"),1),e("div",ft,a(s.formatNumberTopic(t.baseTopic+"/get/frequency",3)+" Hz"),1)])]),_:1}),n(l,{title:"Zählerstände",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[1]||(o[1]=e("div",{class:"row"},[e("div",{class:"col-6 text-right"},"Export"),e("div",{class:"col-6 text-right"},"Import")],-1)),e("div",vt,[e("div",yt,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001)+" kWh"),1),e("div",wt,a(s.formatNumberTopic(t.baseTopic+"/get/imported",3,3,.001)+" kWh"),1)])]),_:1}),n(l,{title:"Werte pro Phase",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[e("div",Tt,[o[2]||(o[2]=e("div",{class:"col-md-4 pr-0 text-center text-md-right"},"Spannung [V]",-1)),e("div",xt,[e("div",Wt,[e("div",kt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[0]),1),e("div",Bt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[1]),1),e("div",Ct,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[2]),1)])])]),e("div",Nt,[o[3]||(o[3]=e("div",{class:"col-md-4 pr-0 text-center text-md-right"},"Strom [A]",-1)),e("div",$t,[e("div",qt,[e("div",Pt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[0]),1),e("div",St,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[1]),1),e("div",At,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[2]),1)])])]),e("div",It,[o[4]||(o[4]=e("div",{class:"col-md-4 pr-0 text-center text-md-right"},"Wirkleistung [kW]",-1)),e("div",Lt,[e("div",jt,[e("div",Ot,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[0]),1),e("div",zt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[1]),1),e("div",Et,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[2]),1)])])]),e("div",Rt,[o[5]||(o[5]=e("div",{class:"col-md-4 pr-0 text-center text-md-right"},"Leistungsfaktor",-1)),e("div",Vt,[e("div",Mt,[e("div",Dt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[0]),1),e("div",Gt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[1]),1),e("div",Ht,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[2]),1)])])])]),_:1})]),_:1},8,["component-id","state","state-message"])}const Ft=v(ht,[["render",Zt],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/CounterCard.vue"]]);w.add(I);const Kt={name:"InverterSumCard",components:{StatusCard:x,FontAwesomeIcon:T},mixins:[y],computed:{baseTopic:{get(){return"openWB/pv"}}}},Jt={class:"row"},Ut={class:"col text-right text-monospace"},Qt={class:"col text-right text-monospace"},Xt={class:"row"},Yt={class:"col text-right text-monospace"},es={class:"col text-right text-monospace"},ts={class:"col text-right text-monospace"};function ss(s,o,c,g,_,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),h(m,{subtype:"success",state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","solar-panel"]}),o[0]||(o[0]=u(" Alle Wechselrichter "))]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW",1)]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[1]||(o[1]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Leistung"),e("div",{class:"col text-right"},"Zählerstand")],-1)),e("div",Jt,[e("div",Ut,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1),e("div",Qt,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001))+" kWh ",1)])]),_:1}),n(l,{title:"Erträge",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[2]||(o[2]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Heute"),e("div",{class:"col text-right"},"Monat"),e("div",{class:"col text-right"},"Jahr")],-1)),e("div",Xt,[e("div",Yt,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001))+" kWh ",1),e("div",es,a(s.formatNumberTopic(t.baseTopic+"/get/monthly_exported",1,1,.001))+" kWh ",1),e("div",ts,a(s.formatNumberTopic(t.baseTopic+"/get/yearly_exported",0,0,.001))+" kWh ",1)])]),_:1})]),_:1},8,["state","state-message"])}const os=v(Kt,[["render",ss],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/InverterSumCard.vue"]]);w.add(I);const as={name:"InverterCard",components:{StatusCard:x,FontAwesomeIcon:T},mixins:[y],props:{inverter:{type:Object,required:!0}},computed:{baseTopic:{get(){return"openWB/pv/"+this.inverter.id}}}},rs={class:"row"},is={class:"col text-right text-monospace"},ns={class:"col text-right text-monospace"},cs={class:"row"},ds={class:"col text-right text-monospace"},ls={class:"col text-right text-monospace"},ps={class:"col text-right text-monospace"};function ms(s,o,c,g,_,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),h(m,{subtype:"success","component-id":c.inverter.id,state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","solar-panel"]}),u(" "+a(c.inverter.name),1)]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW",1)]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[0]||(o[0]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Leistung"),e("div",{class:"col text-right"},"Zählerstand")],-1)),e("div",rs,[e("div",is,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1),e("div",ns,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001))+" kWh ",1)])]),_:1}),n(l,{title:"Erträge",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[1]||(o[1]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Heute"),e("div",{class:"col text-right"},"Monat"),e("div",{class:"col text-right"},"Jahr")],-1)),e("div",cs,[e("div",ds,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001))+" kWh ",1),e("div",ls,a(s.formatNumberTopic(t.baseTopic+"/get/monthly_exported",1,1,.001))+" kWh ",1),e("div",ps,a(s.formatNumberTopic(t.baseTopic+"/get/yearly_exported",0,0,.001))+" kWh ",1)])]),_:1})]),_:1},8,["component-id","state","state-message"])}const us=v(as,[["render",ms],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/InverterCard.vue"]]);w.add(L);const gs={name:"BatterySumCard",components:{StatusCard:x,FontAwesomeIcon:T},mixins:[y],computed:{baseTopic:{get(){return"openWB/bat"}}}},hs={class:"row"},_s={class:"col text-right text-monospace pl-0"},bs={class:"col text-right text-monospace pl-0"},fs={class:"row"},vs={class:"col text-right text-monospace"},ys={class:"col text-right text-monospace"},ws={class:"row"},Ts={class:"col text-right text-monospace"},xs={class:"col text-right text-monospace"};function Ws(s,o,c,g,_,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),h(m,{subtype:"warning",state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","car-battery"]}),o[0]||(o[0]=u(" Alle Speicher "))]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",1,1,.001))+" kW / "+a(s.$store.state.mqtt[t.baseTopic+"/get/soc"])+" % ",1)]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[1]||(o[1]=e("div",{class:"row"},[e("div",{class:"col-6 text-right"},"Leistung"),e("div",{class:"col-6 text-right"},"Ladestand")],-1)),e("div",hs,[e("div",_s,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1),e("div",bs,a(s.$store.state.mqtt[t.baseTopic+"/get/soc"])+" %",1)])]),_:1}),n(l,{title:"Zählerstände",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[4]||(o[4]=e("div",{class:"row"},[e("div",{class:"col"}),e("div",{class:"col text-right"},"Geladen"),e("div",{class:"col text-right"},"Entladen")],-1)),e("div",fs,[o[2]||(o[2]=e("div",{class:"col text-right"},"Heute",-1)),e("div",vs,a(s.formatNumberTopic(t.baseTopic+"/get/daily_imported",3,3,.001))+" kWh ",1),e("div",ys,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001))+" kWh ",1)]),e("div",ws,[o[3]||(o[3]=e("div",{class:"col text-right"},"Gesamt",-1)),e("div",Ts,a(s.formatNumberTopic(t.baseTopic+"/get/imported",3,3,.001))+" kWh ",1),e("div",xs,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001))+" kWh ",1)])]),_:1})]),_:1},8,["state","state-message"])}const ks=v(gs,[["render",Ws],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/BatterySumCard.vue"]]);w.add(L);const Bs={name:"BatteryCard",components:{StatusCard:x,FontAwesomeIcon:T},mixins:[y],props:{battery:{type:Object,required:!0}},computed:{baseTopic:{get(){return"openWB/bat/"+this.battery.id}}}},Cs={class:"row"},Ns={class:"col text-right text-monospace pl-0"},$s={class:"col text-right text-monospace pl-0"},qs={class:"row"},Ps={class:"col text-right text-monospace"},Ss={class:"col text-right text-monospace"},As={class:"row"},Is={class:"col text-right text-monospace"},Ls={class:"col text-right text-monospace"};function js(s,o,c,g,_,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),h(m,{subtype:"warning","component-id":c.battery.id,state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","car-battery"]}),u(" "+a(c.battery.name),1)]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",1,1,.001))+" kW / "+a(s.$store.state.mqtt[t.baseTopic+"/get/soc"])+" % ",1)]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[0]||(o[0]=e("div",{class:"row"},[e("div",{class:"col-6 text-right"},"Leistung"),e("div",{class:"col-6 text-right"},"Ladestand")],-1)),e("div",Cs,[e("div",Ns,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1),e("div",$s,a(s.$store.state.mqtt[t.baseTopic+"/get/soc"])+" %",1)])]),_:1}),n(l,{title:"Zählerstände",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[3]||(o[3]=e("div",{class:"row"},[e("div",{class:"col"}),e("div",{class:"col text-right"},"Geladen"),e("div",{class:"col text-right"},"Entladen")],-1)),e("div",qs,[o[1]||(o[1]=e("div",{class:"col text-right"},"Heute",-1)),e("div",Ps,a(s.formatNumberTopic(t.baseTopic+"/get/daily_imported",3,3,.001))+" kWh ",1),e("div",Ss,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001))+" kWh ",1)]),e("div",As,[o[2]||(o[2]=e("div",{class:"col text-right"},"Gesamt",-1)),e("div",Is,a(s.formatNumberTopic(t.baseTopic+"/get/imported",3,3,.001))+" kWh ",1),e("div",Ls,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001))+" kWh ",1)])]),_:1})]),_:1},8,["component-id","state","state-message"])}const Os=v(Bs,[["render",js],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/BatteryCard.vue"]]);w.add(q,P,S,Q);const zs={name:"RippleControlReceiverCard",components:{FontAwesomeIcon:T},mixins:[y],data(){return{mqttTopicsToSubscribe:["openWB/general/ripple_control_receiver/get/fault_state","openWB/general/ripple_control_receiver/get/fault_str","openWB/general/ripple_control_receiver/get/override_value","openWB/general/ripple_control_receiver/module"]}},computed:{baseTopic:{get(){return"openWB/general/ripple_control_receiver"}}}},Es={class:"row"},Rs={key:0,class:"col"},Vs={key:1,class:"col"},Ms={style:{"white-space":"pre-wrap"}};function Ds(s,o,c,g,_,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("openwb-base-alert");return s.$store.state.mqtt[t.baseTopic+"/module"]&&s.$store.state.mqtt[t.baseTopic+"/module"].type?(d(),h(l,{key:0,subtype:"secondary",collapsible:!0,collapsed:!0,class:"pb-0"},{header:r(()=>[n(p,{icon:["fas","tower-broadcast"]}),o[0]||(o[0]=u(" Steuerbare Verbrauchseinrichtung (RSE) "))]),footer:r(()=>[n(m,{subtype:s.getFaultStateSubtype(t.baseTopic)},{default:r(()=>[n(p,{"fixed-width":"",icon:s.stateIcon},null,8,["icon"]),o[2]||(o[2]=u(" Modulmeldung: ")),e("span",Ms,a(s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]),1)]),_:1},8,["subtype"])]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[e("div",Es,[o[1]||(o[1]=e("div",{class:"col"},"Status",-1)),s.$store.state.mqtt[t.baseTopic+"/get/override_value"]==0?(d(),f("div",Rs," Laden gesperrt ")):(d(),f("div",Vs," Laden erlaubt ("+a(s.$store.state.mqtt[t.baseTopic+"/get/override_value"])+" %) ",1))])]),_:1})]),_:1})):W("",!0)}const Gs=v(zs,[["render",Ds],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/RippleControlReceiver.vue"]]);w.add(X);const Hs={name:"VehicleCard",components:{StatusCard:x,FontAwesomeIcon:T},mixins:[y],props:{vehicle:{type:Object,required:!1,default:void 0},vehicleKey:{type:String,required:!0},vehicleName:{type:String,default:""}},computed:{vehicleIndex:{get(){return parseInt(this.vehicleKey.match(/(?:\/)(\d+)(?=\/)/)[1])}},soc:{get(){return this.formatNumberTopic(this.baseTopic+"/get/soc")}},socTimestamp:{get(){return this.$store.state.mqtt[this.baseTopic+"/get/soc_timestamp"]!==void 0?new Date(this.$store.state.mqtt[this.baseTopic+"/get/soc_timestamp"]*1e3).toLocaleString():"-"}},socRange:{get(){return this.$store.state.mqtt[this.baseTopic+"/get/range"]!==void 0?Math.round(this.$store.state.mqtt[this.baseTopic+"/get/range"]):0}},baseTopic:{get(){return"openWB/vehicle/"+this.vehicleIndex}}}},Zs={class:"row"},Fs={class:"col text-right text-monospace"},Ks={class:"col text-right text-monospace"},Js={class:"col text-right text-monospace"};function Us(s,o,c,g,_,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),h(m,{subtype:"info","component-id":t.vehicleIndex,state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},j({"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","car"]}),u(" "+a(c.vehicleName),1)]),default:r(()=>[n(l,{title:"Fahrzeugdaten",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[0]||(o[0]=e("div",{class:"row"},[e("div",{class:"col pr-0 text-right"},"Ladestand"),e("div",{class:"col pr-0 text-right"},"Reichweite"),e("div",{class:"col pr-0 text-right"},"Letzter Zeitstempel")],-1)),e("div",Zs,[e("div",Fs,a(t.soc)+" %",1),e("div",Ks,a(t.socRange)+" km",1),e("div",Js,a(t.socTimestamp),1)])]),_:1})]),_:2},[t.soc!="-"?{name:"header-right",fn:r(()=>[u(a(t.soc)+" % ",1)]),key:"0"}:void 0]),1032,["component-id","state","state-message"])}const Qs=v(Hs,[["render",Us],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/VehicleCard.vue"]]);w.add(Y);ee.register(te,se,oe,ae,re,ie,ne,ce,de);const Xs={name:"ElectricityTariffCard",components:{StatusCard:x,FontAwesomeIcon:T,ChartjsLine:le},mixins:[y],data(){return{mqttTopicsToSubscribe:["openWB/optional/et/provider","openWB/optional/et/get/fault_state","openWB/optional/et/get/fault_str","openWB/optional/et/get/prices"],chartDatasets:{datasets:[{label:"Stromtarif",unit:"ct/kWh",type:"line",stepped:!0,borderColor:"rgba(255, 0, 0, 0.7)",backgroundColor:"rgba(255, 10, 13, 0.3)",fill:!1,pointStyle:"circle",pointRadius:0,pointHoverRadius:4,cubicInterpolationMode:"monotone",hidden:!1,borderWidth:1,data:void 0,yAxisID:"y",parsing:{xAxisKey:"timestamp",yAxisKey:"price"}}]},chartOptions:{plugins:{title:{display:!1},tooltip:{enabled:!0},legend:{display:!1}},elements:{point:{radius:2}},responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"hour",text:"Zeit",maxTicksLimit:24},display:!0,title:{display:!0,text:"Uhrzeit"},ticks:{font:{size:12},maxTicksLimit:0},grid:{}},y:{position:"left",type:"linear",display:"auto",title:{font:{size:12},display:!0,text:"Preis [ct/kWh]"},grid:{},ticks:{font:{size:12},stepSize:.01,maxTicksLimit:11}}}}}},computed:{electricityTariffConfigured(){const s=this.$store.state.mqtt["openWB/optional/et/provider"];return s!==void 0?s.type!==null:!1},chartDataRead(){return this.chartDataObject.datasets[0].data!=null},chartDataObject(){if(this.$store.state.mqtt["openWB/optional/et/get/prices"]){var s=this.$store.state.mqtt["openWB/optional/et/get/prices"],o=[];for(const[_,t]of Object.entries(s))o.push({timestamp:_*1e3,price:t*1e5});const g=o.slice(-1)[0];o.push({timestamp:g.timestamp+(60*60-1)*1e3,price:g.price})}const c=this.chartDatasets;return c.datasets[0].data=o,c},currentPrice(){return this.formatNumber(this.chartDataObject.datasets[0].data[0].price||0,2)},baseTopic:{get(){return"openWB/optional/et"}}}},Ys={class:"openwb-chart"};function eo(s,o,c,g,_,t){const p=i("font-awesome-icon"),l=i("chartjs-line"),m=i("openwb-base-card"),k=i("status-card");return t.electricityTariffConfigured?(d(),h(k,{key:0,subtype:"secondary",state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","ranking-star"]}),o[0]||(o[0]=u(" Variabler Stromtarif "))]),"header-right":r(()=>[u(a(t.currentPrice)+" ct/kWh",1)]),default:r(()=>[n(m,{title:"Anbieter: "+s.$store.state.mqtt[t.baseTopic+"/provider"].name,subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[e("div",Ys,[t.chartDataRead?(d(),h(l,{key:0,ref:"myChart",data:t.chartDataObject,options:_.chartOptions},null,8,["data","options"])):W("",!0)])]),_:1},8,["title"])]),_:1},8,["state","state-message"])):W("",!0)}const to=v(Xs,[["render",eo],["__scopeId","data-v-f4769d2f"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/ElectricityTariffCard.vue"]]);const so={name:"OpenwbStatusView",components:{ChargePointSumCard:Pe,ChargePointCard:gt,CounterCard:Ft,InverterSumCard:os,InverterCard:us,BatterySumCard:ks,BatteryCard:Os,RippleControlReceiverCard:Gs,VehicleCard:Qs,ElectricityTariffCard:to},mixins:[y],data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/chargepoint/get/power","openWB/chargepoint/get/imported","openWB/chargepoint/get/exported","openWB/chargepoint/get/daily_imported","openWB/chargepoint/get/daily_exported","openWB/chargepoint/+/config","openWB/chargepoint/+/get/+","openWB/chargepoint/+/get/connected_vehicle/info","openWB/chargepoint/+/set/+","openWB/internal_chargepoint/+/data/phases_to_use","openWB/system/device/+/component/+/config","openWB/counter/+/get/+","openWB/pv/get/+","openWB/pv/+/get/+","openWB/bat/get/+","openWB/bat/+/get/+","openWB/vehicle/+/name","openWB/vehicle/+/get/+"]}},computed:{installedChargePoints:{get(){let s=this.getWildcardTopics("openWB/chargepoint/+/config"),o={};for(const[c,g]of Object.entries(s))(g.type==="internal_openwb"||this.$store.state.mqtt["openWB/general/extern"]===!1)&&(o[c]=g);return o}},numChargePointsInstalled:{get(){return Object.keys(this.installedChargePoints).length}},counterConfigs:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"counter")}},numInvertersInstalled:{get(){return Object.keys(this.inverterConfigs).length}},inverterConfigs:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"inverter")}},numBatteriesInstalled:{get(){return Object.keys(this.batteryConfigs).length}},batteryConfigs:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"bat")}},vehicleNames:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.getWildcardTopics("openWB/vehicle/+/name")}}},methods:{filterComponentsByType(s,o){return Object.keys(s).filter(c=>s[c].type.includes(o)).reduce((c,g)=>({...c,[g]:s[g]}),{})}}},oo={class:"status"};function ao(s,o,c,g,_,t){const p=i("charge-point-sum-card"),l=i("charge-point-card"),m=i("counter-card"),k=i("inverter-sum-card"),O=i("inverter-card"),z=i("battery-sum-card"),E=i("battery-card"),R=i("vehicle-card"),V=i("electricity-tariff-card"),M=i("ripple-control-receiver-card");return d(),f("div",oo,[t.numChargePointsInstalled>1&&s.$store.state.mqtt["openWB/general/extern"]===!1?(d(),h(p,{key:0})):W("",!0),(d(!0),f(C,null,N(t.installedChargePoints,(b,B)=>(d(),h(l,{key:B,"installed-charge-point":b,"installed-charge-point-key":B},null,8,["installed-charge-point","installed-charge-point-key"]))),128)),(d(!0),f(C,null,N(t.counterConfigs,b=>(d(),h(m,{key:b.id,counter:b},null,8,["counter"]))),128)),t.numInvertersInstalled>1&&s.$store.state.mqtt["openWB/general/extern"]===!1?(d(),h(k,{key:1})):W("",!0),(d(!0),f(C,null,N(t.inverterConfigs,b=>(d(),h(O,{key:b.id,inverter:b},null,8,["inverter"]))),128)),t.numBatteriesInstalled>1&&s.$store.state.mqtt["openWB/general/extern"]===!1?(d(),h(z,{key:2})):W("",!0),(d(!0),f(C,null,N(t.batteryConfigs,b=>(d(),h(E,{key:b.id,battery:b},null,8,["battery"]))),128)),(d(!0),f(C,null,N(t.vehicleNames,(b,B)=>(d(),h(R,{key:B,"vehicle-key":B,"vehicle-name":b},null,8,["vehicle-key","vehicle-name"]))),128)),n(V),n(M)])}const ho=v(so,[["render",ao],["__scopeId","data-v-051028a3"],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/Status.vue"]]);export{ho as default};
