import{o as c,e as h,i as m,F as p,A as x,z as f,j as y,Q as C,l as d,n as P,p as w,s as v}from"./vendor-caccd77e.js";import{_}from"./vendor-inkline-cfd5d53d.js";import{u as S}from"./index-d95c9514.js";import{l as k,j as b,k as N,m as D,F as z}from"./vendor-fortawesome-63041232.js";const l={props:{data:{required:!1,type:Array},socData:{required:!1,type:Array},width:{Number,default:250},height:{Number,default:70},gap:{Number,default:3},stroke:{Number,default:3},min:{Number,default:0},max:{Number,default:1},color:{String,default:"var(--color--primary)"},colorNegative:{String,default:void 0}},computed:{highestPoint(){return Math.max(1,this.max,...this.slicedData)},lowestPoint(){return Math.min(0,this.min,...this.slicedData)},maxPoints(){return Math.floor(this.width/(this.stroke+this.gap))},slicedData(){if(this.data)return this.data.slice(-this.maxPoints)},slicedSocData(){if(this.socData)return this.socData.slice(-this.maxPoints)},zeroHeight(){return this.height-(0-this.lowestPoint)/(this.highestPoint-this.lowestPoint)*this.height},coordinates(){if(this.data)return this.calculateCoordinates(this.slicedData,this.lowestPoint,this.highestPoint)},socCoordinates(){if(this.socData)return this.calculateCoordinates(this.slicedSocData,0,100)},bars(){if(this.coordinates){const t=[];return this.coordinates.forEach(e=>{const s=e.x,i=e.y,o=this.stroke,r=Math.min(i,this.zeroHeight),a=Math.abs(i-this.zeroHeight),n=i>this.zeroHeight;t.push({x:s,y:r,width:o,height:a,negative:n})}),t}},socPath(){if(this.socCoordinates&&this.socCoordinates.length>0){let e=this.socCoordinates.slice(0,1)[0],s=this.socCoordinates.slice(-1)[0];var t=`M 0,${this.height}`;return t+=` L 0,${e.y}`,this.socCoordinates.forEach(i=>{t+=` L ${i.x+this.stroke/2},${i.y}`}),t+=` L ${s.x+this.stroke},${s.y} L ${s.x+this.stroke},${this.height} Z`,t}}},methods:{calculateCoordinates(t,e,s){const i=[];return t.forEach((o,r)=>{const a=r*this.width/this.maxPoints+1,n=this.height-(o-e)/(s-e)*this.height;i.push({x:a,y:n})}),i}}},u=()=>{C(t=>({"fc7172b1-color":t.color,"fc7172b1-colorNegative":t.colorNegative}))},g=l.setup;l.setup=g?(t,e)=>(u(),g(t,e)):u;const B=["viewBox"],$=["d"],M=["x","y","width","height"],L=["y1","x2","y2"];function q(t,e,s,i,o,r){return c(),h("svg",{class:"spark-line",viewBox:`0 0 ${s.width} ${s.height}`,width:"100%",preserveAspectRatio:"xMinYMin"},[s.socData?(c(),h("path",{key:0,class:"soc-path",d:r.socPath},null,8,$)):m("v-if",!0),(c(!0),h(p,null,x(r.bars,a=>(c(),h("rect",{key:a.x,x:a.x,y:a.y,width:a.width,height:a.height,class:f(s.colorNegative&&a.negative?"negative":"")},null,10,M))),128)),y("line",{class:"zero-line",x1:0,y1:r.zeroHeight,x2:s.width,y2:r.zeroHeight},null,8,L)],8,B)}const j=_(l,[["render",q],["__scopeId","data-v-fc7172b1"],["__file","/home/openwb/core/packages/modules/display_themes/cards/source/src/components/SparkLine.vue"]]);k.add(b,N,D);const A={name:"ChargePointStateBadge",props:{chargePointId:{required:!0,type:Array}},data(){return{mqttStore:S()}},components:{FontAwesomeIcon:z},computed:{plugState(){var t=!1;return this.chargePointId.forEach(e=>{t|=this.mqttStore.getChargePointPlugState(e)}),t},chargeState(){var t=!1;return this.chargePointId.forEach(e=>{t|=this.mqttStore.getChargePointChargeState(e)}),t},stateIcon(){return this.plugState?this.chargeState?["fas","fa-plug-circle-bolt"]:["fas","fa-plug-circle-check"]:["fas","fa-plug-circle-xmark"]},stateClass(){return this.plugState?this.chargeState?"_color:success":"_color:warning":"_color:gray"}}};function I(t,e,s,i,o,r){const a=d("font-awesome-icon"),n=d("i-badge");return c(),P(n,{size:"lg"},{default:w(()=>[v(a,{"fixed-width":"",icon:r.stateIcon,class:f(r.stateClass)},null,8,["icon","class"])]),_:1})}const Q=_(A,[["render",I],["__file","/home/openwb/core/packages/modules/display_themes/cards/source/src/components/ChargePointPlugBadge.vue"]]);export{Q as C,j as S};
